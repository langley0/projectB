webpackJsonp([1],{"++dy":function(e,t,i){e.exports=i.p+"src/assets/mapdata/house-footpad.png"},"+0Jn":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var n=i("BO1k"),s=i.n(n),a=i("Zx67"),r=i.n(a),o=i("Zrlr"),l=i.n(o),h=i("wxAW"),u=i.n(h),c=i("zwoO"),p=i.n(c),d=i("Pf15"),g=i.n(d),m=i("DkLz"),f=i("PxTa"),v=i("GoZD"),y=i("2Pg/"),w=i("qRJk"),x=i("C5Uw"),_=i("P1we"),k=i("+2Tk");var T=function(t){function i(t,n,s,a){l()(this,i);var o=p()(this,(i.__proto__||r()(i)).call(this));return o.getTilePosXFor=function(e,t){return e*this.TILE_HALF_W+t*this.TILE_HALF_W},o.getTilePosYFor=function(e,t){return t*this.TILE_HALF_H-e*this.TILE_HALF_H},o.mapWidth=t,o.mapHeight=n,o.tileWidth=s,o.tileHeight=a,o.TILE_HALF_W=s/2,o.TILE_HALF_H=a/2,o.tilemap=new Array(n*t),o.alphaTiles=[],o.mapContainer=new e.Container,o.addChild(o.mapContainer),o.interactive=!0,o.pathFinder=new v.default(o.mapWidth,o.mapHeight),o.moveEngine=new f.default(o),o.tweens=new y.default,o.currentScale=1,o.posFrame={x:0,y:0,w:980,h:500},o.externalCenter={x:o.posFrame.w>>1,y:o.posFrame.h>>1},o.mapVisualWidthReal=o.getTilePosXFor(o.mapWidth-1,o.mapHeight-1)-o.getTilePosXFor(0,0),o.mapVisualHeightReal=o.getTilePosYFor(o.mapWidth-1,0)-o.getTilePosYFor(0,o.mapHeight-1),o.currentFocusLocation={x:o.mapWidth>>1,y:o.mapHeight>>1},o.centralizeToPoint(o.externalCenter.x,o.externalCenter.y,!0),o}return g()(i,t),u()(i,[{key:"zoomTo",value:function(e,t){this.externalCenter=this.externalCenter?this.externalCenter:{x:this.mapVisualWidthScaled>>1,y:0};var i=this.mapContainer.position.x+(this.mapVisualWidthScaled>>1)-this.externalCenter.x,n=this.mapContainer.position.y-this.externalCenter.y,s=this.currentScale;this.setScale(e,t);var a=this.currentScale/s;this.centralizeToPoint(this.externalCenter.x+i*a,this.externalCenter.y+n*a,t)}},{key:"setScale",value:function(e,t){this.currentScale=e,this.mapVisualWidthScaled=this.mapVisualWidthReal*this.currentScale,this.mapVisualHeightScaled=this.mapVisualHeightReal*this.currentScale,t?this.mapContainer.scale.set(this.currentScale):this.tweens.addTween(this.mapContainer.scale,.5,{x:this.currentScale,y:this.currentScale},0,"easeInOut",!0)}},{key:"centralizeToPoint",value:function(e,t,i){i?(this.mapContainer.position.x=e,this.mapContainer.position.y=t):this.tweens.addTween(this.mapContainer.position,.5,{x:e,y:t},0,"easeInOut",!0)}},{key:"setTile",value:function(e,t,i){var n=void 0;(n="gate"===i.objectType?new _.default(e,t,i):"chest"===i.objectType?new k.default(e,t,i):"anvil"===i.objectType?new x.default(e,t,i):new w.default(e,t,i)).position.x=this.getTilePosXFor(e,t)-this.TILE_HALF_W,n.position.y=this.getTilePosYFor(e,t)+this.TILE_HALF_H;var s=e+t*this.mapWidth;this.tilemap[s]?this.tilemap[s].push(n):this.tilemap[s]=[n]}},{key:"getGroundTileAt",value:function(e,t){var i=this.tilemap[e+t*this.mapWidth];return i&&i.length>0?i[0]:null}},{key:"getObjectAt",value:function(e,t){var i=this.tilemap[e+t*this.mapWidth];return i&&i.length>0?i[i.length-1]:null}},{key:"build",value:function(){var e=this,t=function(t){for(var i=0;i<e.mapHeight;i++)for(var n=e.mapWidth-1;n>=0;--n){var a=n+i*e.mapWidth,r=e.tilemap[a]||[],o=!0,l=!1,h=void 0;try{for(var u,c=s()(r);!(o=(u=c.next()).done);o=!0){t(u.value,n,i)}}catch(e){l=!0,h=e}finally{try{!o&&c.return&&c.return()}finally{if(l)throw h}}}};t(function(t,i,n){t.isGroundTile&&(e.mapContainer.addChild(t),e.pathFinder.setCell(i,n,t.movable))}),t(function(t,i,n){t.isGroundTile||(e.mapContainer.addChild(t),e.pathFinder.setDynamicCell(i,n,t.movable))})}},{key:"onMouseUp",value:function(e){this.checkForTileClick(e.data)}},{key:"checkForTileClick",value:function(e){var t=this.mapContainer.toLocal(e.global),i=this.getTileFromLocalPos(t);if(i&&i.length>0&&this.onTileSelected){var n=i[0];this.onTileSelected(n.gridX,n.gridY)}}},{key:"getTileFromLocalPos",value:function(e){for(var t=0;t<this.mapHeight;++t)for(var i=0;i<this.mapWidth;++i){var n=this.getTilePosXFor(i,t),s=this.getTilePosYFor(i,t);if(n-this.TILE_HALF_W<=e.x&&e.x<n+this.TILE_HALF_W&&s-this.TILE_HALF_H<=e.y&&e.y<s+this.TILE_HALF_H&&Math.abs(e.x-n)*this.TILE_HALF_H/this.TILE_HALF_W+Math.abs(e.y-s)<=this.TILE_HALF_H){var a=i+t*this.mapWidth;return this.tilemap[a]}}return null}},{key:"addCharacter",value:function(e,t,i){var n=this.getTilePosXFor(t,i),s=this.getTilePosYFor(t,i);e.position.x=n,e.position.y=s,e.container.position.x=-this.TILE_HALF_W,e.container.position.y=this.TILE_HALF_H,this.addObjRefToLocation(e,t,i),this.arrangeDepthsFromLocation(t,i)}},{key:"moveCharacter",value:function(e,t,i){var n=this.getInteractiveTarget(t,i),s=!!n,a=e.currentTargetTile?e.currentTargetTile.x:e.gridX,r=e.currentTargetTile?e.currentTargetTile.y:e.gridY,o=this.pathFinder.solve(a,r,t,i,s);o&&(o[0].x===t&&o[0].y===i?this.interactTarget=n:this.interactTarget=null,e.isMoving?e.newPath=o:this.moveObjThrough(e,o))}},{key:"getInteractiveTarget",value:function(e,t){var i=this.getObjectAt(e,t);return i&&i.isInteractive?i:null}},{key:"moveObjThrough",value:function(e,t){if(e.currentTarget&&this.stopObject(e),e.newPath&&(t=e.newPath,e.newPath=void 0),0!=t.length){!0&this.showPathHighlight&&this.highlightPath(e.currentPath,t),e.currentPath=t,e.currentPathStep=e.currentPath.length-1,e.currentTargetTile=e.currentPath[e.currentPathStep],e.speedMagnitude=2,this.onObjMoveStepBegin(e,e.currentTargetTile.x,e.currentTargetTile.y)}else this.onObjMoveStepEnd(e)}},{key:"stopObject",value:function(e){e.currentPath=null,e.currentTarget=null,e.currentTargetTile=null,this.moveEngine.removeMovable(e)}},{key:"onObjMoveStepBegin",value:function(e,t,i){return e.currentDirection=function(e,t,i,n){if(e===i){if(t<n)return m.DIRECTIONS.SE;if(t>n)return m.DIRECTIONS.NW}else if(t===n){if(e<i)return m.DIRECTIONS.NE;if(e>i)return m.DIRECTIONS.SW}return null}(e.gridX,e.gridY,t,i),e.isMoving=!0,e.changeVisualToDirection(e.currentDirection),this.moveEngine.setMoveParameters(e,t,i),this.moveEngine.addMovable(e),!0}},{key:"onObjMoveStepEnd",value:function(e){e.currentPathStep--,e.currentTarget=null,e.currentTargetTile=null;var t=0>e.currentPathStep;this.moveEngine.removeMovable(e);var i=!1;if(this.onTilePassing&&(i=this.onTilePassing(e)),this.interactTarget&&0===e.currentPathStep&&(i=!0),t||i){if(e.isMoving=!1,e.changeVisualToDirection(e.currentDirection),this.interactTarget){var n=this.interactTarget;this.interactTarget=null,this.onTouchObject&&this.onTouchObject(n)}}else this.moveObjThrough(e,e.currentPath.slice(0,e.currentPath.length-1))}},{key:"highlightPath",value:function(e,t){if(e)for(var i=0;i<e.length;i++){var n=e[i];if(!t||-1===t.indexOf(n)){var s=this.getGroundTileAt(n.x,n.y);s&&s.setHighlighted(!1)}}if(t)for(var a=0;a<t.length;a++){var r=t[a];if(!e||-1===e.indexOf(r)){var o=this.getGroundTileAt(r.x,r.y);o&&o.setHighlighted(!0)}}}},{key:"checkForTileChange",value:function(e){for(var t={x:e.position.x,y:e.position.y},i=this.getGroundTileAt(e.currentTargetTile.x,e.currentTargetTile.y),n=[],s=0;s<i.vertices.length;s++)n[s]=[i.vertices[s][0]+i.position.x,i.vertices[s][1]+i.position.y];e.currentTargetTile.x===e.gridX&&e.currentTargetTile.y===e.gridY||function(e,t){for(var i=e.y,n=e.x,s=t.length,a=!1,r=0,o=s-1;r<s;o=r++)t[r][1]>i!=t[o][1]>i&&n<(t[o][0]-t[r][0])*(i-t[r][1])/(t[o][1]-t[r][1])+t[r][0]&&(a=!a);return a}(t,n)&&(this.arrangeObjLocation(e,e.currentTargetTile.x,e.currentTargetTile.y),this.arrangeObjTransperancies(e,e.gridX,e.gridY,e.currentTargetTile.x,e.currentTargetTile.y),this.arrangeDepthsFromLocation(e.gridX,e.gridY))}},{key:"checkForFollowCharacter",value:function(e,t){this.currentFocusLocation={c:e.gridX,r:e.gridY};var i=this.externalCenter.x-e.position.x*this.currentScale,n=this.externalCenter.y-e.position.y*this.currentScale;t?(this.mapContainer.position.x=i,this.mapContainer.position.y=n):this.tweens.addTween(this.mapContainer.position,.1,{x:i,y:n},0,"easeOut_ex",!0)}},{key:"arrangeObjTransperancies",value:function(e,t,i,n,a){var r,o,l=!0,h=!1,u=void 0;try{for(var c,p=s()(this.alphaTiles);!(l=(c=p.next()).done);l=!0){c.value.alpha=1}}catch(e){h=!0,u=e}finally{try{!l&&p.return&&p.return()}finally{if(h)throw u}}this.alphaTiles=[];for(var d=a;d<this.mapHeight;++d)for(var g=0;g<=n;++g){var m=this.tilemap[g+d*this.mapWidth]||[],f=!0,v=!1,y=void 0;try{for(var w,x=s()(m);!(f=(w=x.next()).done);f=!0){var _=w.value;if(_&&_!==e&&_.transperancy)(r=_.getBounds(!0),o=e.getBounds(!0),r.x<o.x+o.width&&r.x+r.width>o.x&&r.y<o.y+o.height&&r.y+r.height>o.y)&&(_.alpha=.75,this.alphaTiles.push(_))}}catch(e){v=!0,y=e}finally{try{!f&&x.return&&x.return()}finally{if(v)throw y}}}}},{key:"arrangeObjLocation",value:function(e,t,i){this.removeObjRefFromLocation(e),this.addObjRefToLocation(e,t,i)}},{key:"arrangeDepthsFromLocation",value:function(e,t){for(var i=t;i<this.mapHeight;i++)for(var n=e;n>=0;n--){var a=this.tilemap[n+i*this.mapWidth]||[],r=!0,o=!1,l=void 0;try{for(var h,u=s()(a);!(r=(h=u.next()).done);r=!0){var c=h.value;c.isGroundTile||this.mapContainer.addChild(c)}}catch(e){o=!0,l=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw l}}}}},{key:"removeObjRefFromLocation",value:function(e){this.mapContainer.removeChild(e)}},{key:"addObjRefToLocation",value:function(e,t,i){e.gridX=t,e.gridY=i,this.mapContainer.addChild(e)}},{key:"update",value:function(){this.moveEngine.update(),this.tweens.update()}}]),i}(e.Container);t.default=T}.call(t,i("50uv"))},"+2Tk":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("Zx67"),s=i.n(n),a=i("Zrlr"),r=i.n(a),o=i("wxAW"),l=i.n(o),h=i("zwoO"),u=i.n(h),c=i("Pf15"),p=i.n(c),d=function(e){function t(e,i,n){r()(this,t);var a=u()(this,(t.__proto__||s()(t)).call(this,e,i,n));return a.isInteractive=!0,a.isOpened=!1,a.animations=n.animations,a}return p()(t,e),l()(t,[{key:"open",value:function(){this.setTexture(this.animations[1].texture),this.isOpened=!0}},{key:"touch",value:function(e){var t=this;if(this.isOpened)e.ui.showDialog("상자는 비어있다.");else{this.open();var i=void 0;e.player.inventory.getItemByType(1)?e.player.inventory.getItemByType(2)||(e.player.inventory.addItem(2,2),i=2):(e.player.inventory.addItem(1,1),i=1),2===i?(e.battleMode.callback=function(){t.onItemAdded(e,i)},e.enterStage("assets/mapdata/map2.json","battle")):this.onItemAdded(e,i)}}},{key:"onItemAdded",value:function(e,t){e.ui.showItemAcquire(t,function(){e.player.inventory.getItemByType(1)&&e.player.inventory.getItemByType(2)?e.ui.showChatBallon(e.player,"열쇠조각은 모두 모았어!!\n아까 모루를 본 것 같은데 \n그쪽으로 가보자",4):e.ui.showChatBallon(e.player,"열쇠조각이다! 나머지 조각도 어딘가 있을거야",4)})}}]),t}(i("qRJk").default);t.default=d},"+gN6":function(e,t,i){var n={"./assets/assets_characters.json":"pecr","./assets/assets_characters.png":"ThIZ","./assets/assets_map.json":"hZSW","./assets/assets_map.png":"F/sg","./assets/background.png":"cf+J","./assets/battle-turn_enemy.png":"h9v0","./assets/battle-turn_player.png":"kpgF","./assets/border.png":"2OwV","./assets/btn_centralize.png":"R2tb","./assets/btn_centralizeToObject.png":"KKxP","./assets/btn_focusToObject.png":"/Um0","./assets/btn_zoomIn.png":"bxyk","./assets/btn_zoomOut.png":"A2HH","./assets/ch01_skill01.png":"ixNQ","./assets/ch01_skill01_on.png":"n0x2","./assets/ch01_skill02.png":"1CaR","./assets/ch01_skill02_on.png":"Thq4","./assets/ch02_skill01.png":"wCSF","./assets/ch02_skill01_on.png":"lIDM","./assets/ch02_skill02.png":"1BTM","./assets/ch02_skill02_on.png":"683H","./assets/ch03_skill01.png":"RWdx","./assets/ch03_skill01_on.png":"vDF+","./assets/ch03_skill02.png":"6QCc","./assets/ch03_skill02_on.png":"xnvo","./assets/combine.png":"61+0","./assets/combine_button.png":"d9pj","./assets/combine_listitem.png":"SJkF","./assets/dialog.png":"QKlM","./assets/dialogtitle.png":"yDv2","./assets/elid/elid_atk_nw.json":"vbJk","./assets/elid/elid_atk_nw.png":"7rqt","./assets/elid/elid_atk_sw.json":"hMIW","./assets/elid/elid_atk_sw.png":"/YY/","./assets/elid/elid_death_nw.png":"v5Cq","./assets/elid/elid_idle_nw.json":"6S6p","./assets/elid/elid_idle_nw.png":"W/RV","./assets/elid/elid_idle_sw.json":"rki7","./assets/elid/elid_idle_sw.png":"daie","./assets/ending.png":"QSXp","./assets/ending_victory.png":"1qmm","./assets/groundImage.jpg":"62uW","./assets/highlight.png":"0aEm","./assets/inventory.png":"S0Ft","./assets/items/item3.png":"r15H","./assets/mapdata/house-carpet01.png":"x62O","./assets/mapdata/house-footpad.png":"++dy","./assets/mapdata/house-object01.png":"likm","./assets/mapdata/house-object02.png":"YuHB","./assets/mapdata/house-pillar.png":"j9Ud","./assets/mapdata/house-table.png":"Uaoq","./assets/mapdata/house-tile.png":"q1Fi","./assets/mapdata/house-tile01.png":"lz6l","./assets/mapdata/house-tile92.png":"f2mI","./assets/mapdata/house.json":"6+JZ","./assets/mapdata/house2x2.png":"B8ss","./assets/mapdata/house4x4.png":"FZo1","./assets/mapdata/map.json":"ilsi","./assets/mapdata/map2.json":"QyYQ","./assets/mapdata/map3.json":"0SKj","./assets/mapdata/objects.json":"bcYj","./assets/mapdata/objects.png":"XvEF","./assets/mapdata/stealBar.png":"J808","./assets/mapdata/stealBarL.png":"On9J","./assets/mapdata/stealBarR.png":"ob3r","./assets/mapdata/tiles.json":"pwQP","./assets/mapdata/tiles.png":"xGYh","./assets/mapdata/walls.json":"/qV/","./assets/mapdata/walls.png":"1c7l","./assets/medusa/monster1-atk_sw.json":"UOdx","./assets/medusa/monster1-atk_sw.png":"kQwz","./assets/medusa/monster1_idle_sw.json":"vW6P","./assets/medusa/monster1_idle_sw.png":"y7rX","./assets/miluda/miluda_atk_nw.json":"O5rI","./assets/miluda/miluda_atk_nw.png":"I3+a","./assets/miluda/miluda_atk_sw.json":"/HZx","./assets/miluda/miluda_atk_sw.png":"O4gy","./assets/miluda/miluda_idle_nw.json":"pjYb","./assets/miluda/miluda_idle_nw.png":"imdM","./assets/miluda/miluda_idle_sw.json":"Mygw","./assets/miluda/miluda_idle_sw.png":"mmyy","./assets/monster01.png":"3AXL","./assets/monster01_active.png":"LSkp","./assets/monster02.png":"ZHXx","./assets/monster02_active.png":"Lb+B","./assets/monster03.png":"iIlD","./assets/monster03_active.png":"5J8E","./assets/night/atk_nw.json":"4C0C","./assets/night/atk_nw.png":"AJu8","./assets/night/atk_sw.json":"xykr","./assets/night/atk_sw.png":"4GjZ","./assets/night/idle_nw.json":"zPL7","./assets/night/idle_nw.png":"/wL9","./assets/night/idle_sw.json":"egTb","./assets/night/idle_sw.png":"EEAh","./assets/night/sword_nw.json":"v8ZX","./assets/night/sword_nw.png":"vIzp","./assets/night/sword_sw.json":"IQyG","./assets/night/sword_sw.png":"S6X1","./assets/night/walk_nw.json":"PDkE","./assets/night/walk_nw.png":"i6JU","./assets/night/walk_sw.json":"co/e","./assets/night/walk_sw.png":"QRr6","./assets/opening.png":"tSQQ","./assets/pbar.png":"SE36","./assets/pbar_g.png":"ExSd","./assets/pbar_o.png":"L1gO","./assets/pbar_r.png":"Azkk","./assets/player1.png":"TCQi","./assets/player1_active.png":"FiEM","./assets/player1_active2.png":"ufHM","./assets/player2.png":"2aNe","./assets/player2_active.png":"PHls","./assets/player2_active2.png":"uGjp","./assets/player3.png":"SPZO","./assets/player3_active.png":"m4/X","./assets/player3_active2.png":"sskf","./assets/shadow.png":"z8NX","./assets/slash_1.json":"7jKW","./assets/slash_1.png":"QJA4","./assets/statui.png":"JqAh","./assets/theater.png":"qTO+","./assets/titan/monster2-atk_sw.json":"nqSm","./assets/titan/monster2-atk_sw.png":"uCLC","./assets/titan/monster2-idle_sw.json":"B2Me","./assets/titan/monster2-idle_sw.png":"3U4P","./assets/torch_light.png":"sARW","./assets/ui/chatballon.png":"mm+o","./assets/ui/chatballon_comma.png":"aPgd","./assets/window_light.png":"AkAU","./assets/windowlight.png":"x0Wi","./js/battle":"m5GK","./js/battle.js":"m5GK","./js/character":"zTqn","./js/character.js":"zTqn","./js/define":"DkLz","./js/define.js":"DkLz","./js/explore":"p4ax","./js/explore.js":"p4ax","./js/game":"c6m3","./js/game.js":"c6m3","./js/moveengine":"PxTa","./js/moveengine.js":"PxTa","./js/movieclip":"OSyj","./js/movieclip.js":"OSyj","./js/pathfinder":"GoZD","./js/pathfinder.js":"GoZD","./js/player":"1fqz","./js/player.js":"1fqz","./js/resource-manager":"YxTU","./js/resource-manager.js":"YxTU","./js/stage":"+0Jn","./js/stage.js":"+0Jn","./js/tile/anvil":"C5Uw","./js/tile/anvil.js":"C5Uw","./js/tile/chest":"+2Tk","./js/tile/chest.js":"+2Tk","./js/tile/gate":"P1we","./js/tile/gate.js":"P1we","./js/tile/tile":"qRJk","./js/tile/tile.js":"qRJk","./js/tiledmap":"yBjY","./js/tiledmap.js":"yBjY","./js/tweens":"2Pg/","./js/tweens.js":"2Pg/","./js/ui":"qOui","./js/ui.js":"qOui","./main":"NHnr","./main.js":"NHnr"};function s(e){return i(a(e))}function a(e){var t=n[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}s.keys=function(){return Object.keys(n)},s.resolve=a,e.exports=s,s.id="+gN6"},"/HZx":function(e,t,i){e.exports=i.p+"src/assets/miluda/miluda_atk_sw.json"},"/Um0":function(e,t,i){e.exports=i.p+"src/assets/btn_focusToObject.png"},"/YY/":function(e,t,i){e.exports=i.p+"src/assets/elid/elid_atk_sw.png"},"/qV/":function(e,t,i){e.exports=i.p+"src/assets/mapdata/walls.json"},"/wL9":function(e,t,i){e.exports=i.p+"src/assets/night/idle_nw.png"},"0SKj":function(e,t,i){e.exports=i.p+"src/assets/mapdata/map3.json"},"0aEm":function(e,t,i){e.exports=i.p+"src/assets/highlight.png"},"1BTM":function(e,t,i){e.exports=i.p+"src/assets/ch02_skill02.png"},"1CaR":function(e,t,i){e.exports=i.p+"src/assets/ch01_skill02.png"},"1c7l":function(e,t,i){e.exports=i.p+"src/assets/mapdata/walls.png"},"1fqz":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var n=i("BO1k"),s=i.n(n),a=i("wxAW"),r=i.n(a),o=i("Zx67"),l=i.n(o),h=i("Zrlr"),u=i.n(h),c=i("zwoO"),p=i.n(c),d=i("Pf15"),g=i.n(d);function m(t,i){for(var n=[],s=0;s<i;s++)n.push(e.Texture.fromFrame(t+s+".png"));return n}var f=function(e){function t(){u()(this,t);var e=p()(this,(t.__proto__||l()(t)).call(this));return e.inventory=new v,e}return g()(t,e),t}(function(t){function i(){u()(this,i);var t=p()(this,(i.__proto__||l()(i)).call(this));t.removeChild(t.container),t.name="Hector",t.portrait=new e.Sprite(e.Texture.fromFrame("player1_active.png")),t.skillAIcon=new e.Sprite(e.Texture.fromFrame("ch03_skill01_on.png")),t.skillBIcon=new e.Sprite(e.Texture.fromFrame("ch03_skill02.png")),t.hp=300,t.maxHp=300,t.damage=120,t.balance=.85,t.ciriticalRate=.3,t.ciriticalBalance=1.7,t.defense=.5,t.animations.idle_nw={textures:m("idle_nw",2),flipX:!1},t.animations.idle_sw={textures:m("idle_sw",2),flipX:!1},t.animations.idle_ne={textures:t.animations.idle_nw.textures,flipX:!0},t.animations.idle_se={textures:t.animations.idle_sw.textures,flipX:!0},t.animations.walk_nw={textures:m("walk_nw",8),flipX:!1},t.animations.walk_sw={textures:m("walk_sw",8),flipX:!1},t.animations.walk_ne={textures:t.animations.walk_nw.textures,flipX:!0},t.animations.walk_se={textures:t.animations.walk_sw.textures,flipX:!0},t.animations.attack_nw={textures:m("atk_nw",10),flipX:!1},t.animations.attack_sw={textures:m("atk_sw",10),flipX:!1},t.animations.attack_ne={textures:t.animations.attack_nw.textures,flipX:!0},t.animations.attack_se={textures:t.animations.attack_sw.textures,flipX:!0};var n=new e.extras.AnimatedSprite(t.animations.idle_sw.textures);return n.animationSpeed=.1,n.play(),n.position.y=-48,t.anim=n,t.container.addChild(n),t.hpHolder.position.y=-t.anim.height-8,t.hpHolder.position.x=16-t.hpHolder.width/2,t.hpBar.position.y=-t.anim.height-7,t.hpBar.position.x=16-t.hpHolder.width/2+1,t.addChild(t.container),t}return g()(i,t),i}(i("zTqn").default));t.default=f;var v=function(){function e(){u()(this,e),this.items=[]}return r()(e,[{key:"addItem",value:function(e,t){var i=new y(e,t);this.items.push(i)}},{key:"getItemByType",value:function(e){var t=!0,i=!1,n=void 0;try{for(var a,r=s()(this.items);!(t=(a=r.next()).done);t=!0){var o=a.value;if(o.itemType===e)return o}}catch(e){i=!0,n=e}finally{try{!t&&r.return&&r.return()}finally{if(i)throw n}}return null}},{key:"deleteItem",value:function(e){for(var t=0;t<this.items.length;t++){if(this.items[t].itemId===e)return void this.items.splice(t,1)}}},{key:"eachItem",value:function(e){var t=!0,i=!1,n=void 0;try{for(var a,r=s()(this.items);!(t=(a=r.next()).done);t=!0){e(a.value)}}catch(e){i=!0,n=e}finally{try{!t&&r.return&&r.return()}finally{if(i)throw n}}}}]),e}(),y=function e(t,i){u()(this,e),this.itemId=t,this.itemType=i}}.call(t,i("50uv"))},"1qmm":function(e,t,i){e.exports=i.p+"src/assets/ending_victory.png"},"2OwV":function(e,t,i){e.exports=i.p+"src/assets/border.png"},"2Pg/":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("Zrlr"),s=i.n(n),a=i("wxAW"),r=i.n(a),o=function(e,t,i,n){return i*e/n+t},l=function(e,t,i,n){return i*(e/=n)*e+t},h=function(e,t,i,n){return-i*(e/=n)*(e-2)+t},u=function(e,t,i,n){return e/=n,Math.floor(-i*e*(e-2)+t)},c=function(e,t,i,n){return(e/=n/2)<1?i/2*e*e+t:-i/2*(--e*(e-2)-1)+t},p=function(){function e(){s()(this,e),this.activeForTweens=!1,this.processFrame=!0,this.tweenTargets=[],this.fps=60}return r()(e,[{key:"addTween",value:function(e,t,i,n,s,a,r){var p,d=null;for(var g in i)d||(d={}),d[g]={b:e[g],c:i[g]-e[g]};if(d){var m={target:e,duration:t,easingFunc:(p=s,"easeInOut"===p||"easeInOutQuad"===p||"Quad.easeInOut"===p?c:"easeIn"===p||"easeInQuad"===p||"Quad.easeIn"===p?l:"easeOut"===p||"easeOutQuad"===p||"Quad.easeOut"===p?h:"easeOut_ex"===p?u:o),overwrite:a||!1,onComplete:r||null,totalFrames:t*this.fps,delayFrame:n*this.fps,currentFrame:0,vars:d};if(this.tweenTargets.indexOf(e)>=0){var f=e.tweens;if(f||(f=[]),m.overwrite){for(var v=0;v<f.length;v++)f[v]=null;f=[]}f[f.length]=m,e.tweens=f}else e.tweens=[m],this.tweenTargets[this.tweenTargets.length]=e;this.tweenTargets.length>0&&!this.activeForTweens&&(this.activeForTweens=!0)}}},{key:"removeTween",value:function(e,t){var i=!1;if(e&&t){var n=this.tweenTargets.indexOf(e);if(!(n>=0))throw new Error("No tween target defined for this object");if(!(this.tweenTargets[n].tweens&&this.tweenTargets[n].tweens.length>0))throw new Error("No tween defined for this object");var s=this.tweenTargets[n].tweens,a=s.indexOf(t);if(!(a>=0))throw console.log(e,t),new Error("No tween defined for this object");t.onComplete=null,t.easingFunc=null,t.target=null,s.splice(a,1),0===s.length&&(this.tweenTargets.splice(n,1),i=!0),0===this.tweenTargets.length&&(this.activeForTweens=!1)}return i}},{key:"update",value:function(){if(this.activeForTweens)for(var e=this.tweenTargets.length,t=0;t<e;t++)for(var i=this.tweenTargets[t],n=i.tweens,s=0;s<n.length;s++){var a=n[s];if(a.currentFrame++,a.currentFrame>=a.delayFrame){var r=a.vars;for(var o in r)i[o]=a.easingFunc(a.currentFrame-a.delayFrame,r[o].b,r[o].c,a.totalFrames);if(a.currentFrame-a.delayFrame>=a.totalFrames){var l=a.onComplete;this.removeTween(i,a)&&(t--,e--),s--,l&&l()}}}}}]),e}();t.default=p},"2aNe":function(e,t,i){e.exports=i.p+"src/assets/player2.png"},"3AXL":function(e,t,i){e.exports=i.p+"src/assets/monster01.png"},"3U4P":function(e,t,i){e.exports=i.p+"src/assets/titan/monster2-idle_sw.png"},"4C0C":function(e,t,i){e.exports=i.p+"src/assets/night/atk_nw.json"},"4GjZ":function(e,t,i){e.exports=i.p+"src/assets/night/atk_sw.png"},"5J8E":function(e,t,i){e.exports=i.p+"src/assets/monster03_active.png"},"6+JZ":function(e,t,i){e.exports=i.p+"src/assets/mapdata/house.json"},"61+0":function(e,t,i){e.exports=i.p+"src/assets/combine.png"},"62uW":function(e,t,i){e.exports=i.p+"src/assets/groundImage.jpg"},"683H":function(e,t,i){e.exports=i.p+"src/assets/ch02_skill02_on.png"},"6QCc":function(e,t,i){e.exports=i.p+"src/assets/ch03_skill02.png"},"6S6p":function(e,t,i){e.exports=i.p+"src/assets/elid/elid_idle_nw.json"},"7jKW":function(e,t,i){e.exports=i.p+"src/assets/slash_1.json"},"7rqt":function(e,t,i){e.exports=i.p+"src/assets/elid/elid_atk_nw.png"},A2HH:function(e,t,i){e.exports=i.p+"src/assets/btn_zoomOut.png"},AJu8:function(e,t,i){e.exports=i.p+"src/assets/night/atk_nw.png"},AkAU:function(e,t,i){e.exports=i.p+"src/assets/window_light.png"},Azkk:function(e,t,i){e.exports=i.p+"src/assets/pbar_r.png"},B2Me:function(e,t,i){e.exports=i.p+"src/assets/titan/monster2-idle_sw.json"},B8ss:function(e,t,i){e.exports=i.p+"src/assets/mapdata/house2x2.png"},C5Uw:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("Zx67"),s=i.n(n),a=i("Zrlr"),r=i.n(a),o=i("wxAW"),l=i.n(o),h=i("zwoO"),u=i.n(h),c=i("Pf15"),p=i.n(c),d=function(e){function t(e,i,n){r()(this,t);var a=u()(this,(t.__proto__||s()(t)).call(this,e,i,n));return a.isInteractive=!0,a.firstTouch=!0,a}return p()(t,e),l()(t,[{key:"touch",value:function(e){this.firstTouch?(this.firstTouch=!1,e.ui.showDialog("모루를 발견하였다\n\n새로운 아이템을 조합할 수 있게 되었다",function(){e.ui.showCombine()})):e.ui.showCombine()}}]),t}(i("qRJk").default);t.default=d},DkLz:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i.d(t,"DIRECTIONS",function(){return n});var n={SW:2,NW:4,NE:6,SE:8}},EEAh:function(e,t,i){e.exports=i.p+"src/assets/night/idle_sw.png"},ExSd:function(e,t,i){e.exports=i.p+"src/assets/pbar_g.png"},"F/sg":function(e,t,i){e.exports=i.p+"src/assets/assets_map.png"},FZo1:function(e,t,i){e.exports=i.p+"src/assets/mapdata/house4x4.png"},FiEM:function(e,t,i){e.exports=i.p+"src/assets/player1_active.png"},GoZD:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("Zrlr"),s=i.n(n),a=i("wxAW"),r=i.n(a),o=function(){function e(t,i,n){s()(this,e),this.x=t,this.y=i,this.weight=n,this.ignoreCollide=!1}return r()(e,[{key:"getCost",value:function(e){return e&&e.x!==this.x&&e.y!==this.y?1.41421*this.weight:this.weight}},{key:"isWall",value:function(){return!this.ignoreCollide&&(0===this.weight||0===this.dynamicWeight)}}]),e}(),l=function(){function e(t){s()(this,e),this.content=[],this.scoreFunction=t}return r()(e,[{key:"push",value:function(e){this.content.push(e),this.sinkDown(this.content.length-1)}},{key:"pop",value:function(){var e=this.content[0],t=this.content.pop();return this.content.length>0&&(this.content[0]=t,this.bubbleUp(0)),e}},{key:"remove",value:function(e){var t=this.content.indexOf(e),i=this.content.pop();t!==this.content.length-1&&(this.content[t]=i,this.scoreFunction(i)<this.scoreFunction(e)?this.sinkDown(t):this.bubbleUp(t))}},{key:"size",value:function(){return this.content.length}},{key:"rescoreElement",value:function(e){this.sinkDown(this.content.indexOf(e))}},{key:"sinkDown",value:function(e){for(var t=this.content[e];e>0;){var i=(e+1>>1)-1,n=this.content[i];if(!(this.scoreFunction(t)<this.scoreFunction(n)))break;this.content[i]=t,this.content[e]=n,e=i}}},{key:"bubbleUp",value:function(e){for(var t=this.content.length,i=this.content[e],n=this.scoreFunction(i);;){var s=e+1<<1,a=s-1,r=null,o=void 0;if(a<t){var l=this.content[a];(o=this.scoreFunction(l))<n&&(r=a)}if(s<t){var h=this.content[s];this.scoreFunction(h)<(null===r?n:o)&&(r=s)}if(null===r)break;this.content[e]=this.content[r],this.content[r]=i,e=r}}}]),e}(),h=function(){function e(t,i){s()(this,e),this.nodes=[],this.grid=[];for(var n=0;n<i;n++){this.grid.push([]);for(var a=0;a<t;a++){var r=new o(a,n,1);this.grid[n].push(r),this.nodes.push(r)}}}return r()(e,[{key:"init",value:function(){this.dirtyNodes=[];for(var e=0;e<this.nodes.length;e++)this.cleanNode(this.nodes[e])}},{key:"cleanNode",value:function(e){e.f=0,e.g=0,e.h=0,e.visited=!1,e.closed=!1,e.parent=null}},{key:"solve",value:function(e,t,i,n,s){var a=this.grid[t][e],r=this.grid[n][i];r.ignoreCollide=s;var o=this.search(a,r);return r.ignoreCollide=!1,o&&o.length>0?o:null}},{key:"search",value:function(e,t){this.init();var i=function(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)},n=new l(function(e){return e.f}),s=e;for(e.h=i(e,t),n.push(e);n.size()>0;){var a=n.pop();if(a===t)return this.pathTo(a);a.closed=!0;for(var r=this.neighbors(a),o=0,h=r.length;o<h;++o){var u=r[o];if(!u.closed&&!u.isWall()){var c=a.g+u.getCost(a),p=u.visited;(!p||c<u.g)&&(u.visited=!0,u.parent=a,u.h=u.h||i(u,t),u.g=c,u.f=u.g+u.h,this.markDirty(u),(u.h<s.h||u.h===s.h&&u.g<s.g)&&(s=u),p?n.rescoreElement(u):n.push(u))}}}return this.pathTo(s)}},{key:"pathTo",value:function(e){for(var t=e,i=[];t.parent;)i.push(t),t=t.parent;return i}},{key:"neighbors",value:function(e){var t=[],i=e.x,n=e.y,s=this.grid;return s[n-1]&&s[n-1][i]&&t.push(s[n-1][i]),s[n+1]&&s[n+1][i]&&t.push(s[n+1][i]),s[n]&&s[n][i-1]&&t.push(s[n][i-1]),s[n]&&s[n][i+1]&&t.push(s[n][i+1]),t}},{key:"markDirty",value:function(e){this.dirtyNodes.push(e)}},{key:"setCell",value:function(e,t,i){this.grid[t][e].weight=i?1:0}},{key:"setDynamicCell",value:function(e,t,i){this.grid[t][e].dynamicWeight=i?1:0}}]),e}();t.default=h},"I3+a":function(e,t,i){e.exports=i.p+"src/assets/miluda/miluda_atk_nw.png"},IQyG:function(e,t,i){e.exports=i.p+"src/assets/night/sword_sw.json"},J808:function(e,t,i){e.exports=i.p+"src/assets/mapdata/stealBar.png"},JqAh:function(e,t,i){e.exports=i.p+"src/assets/statui.png"},KKxP:function(e,t,i){e.exports=i.p+"src/assets/btn_centralizeToObject.png"},L1gO:function(e,t,i){e.exports=i.p+"src/assets/pbar_o.png"},LSkp:function(e,t,i){e.exports=i.p+"src/assets/monster01_active.png"},"Lb+B":function(e,t,i){e.exports=i.p+"src/assets/monster02_active.png"},Mygw:function(e,t,i){e.exports=i.p+"src/assets/miluda/miluda_idle_sw.json"},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var t=i("c6m3"),n=i("qOui"),s=i("YxTU");!function(){var i=new e.Application(980,500,{backgroundColor:7056606,forceCanvas:!0});document.body.appendChild(i.view);var a=new s.default;a.add("opening.png","assets/opening.png"),a.add("border.png","assets/border.png"),a.load(function(){var s=new e.Sprite(e.Texture.fromFrame("opening.png"));s.interactive=!0,i.stage.addChild(s),s.mouseup=function(){!function(i){i.stage.removeChildren();var s=new t.default(i);i.stage.addChild(new e.Sprite(e.Texture.fromFrame("border.png"))),s.resourceManager.add("dialog.png","assets/dialog.png"),s.resourceManager.add("dialogtitle.png","assets/dialogtitle.png"),s.resourceManager.add("theater.png","assets/theater.png"),s.resourceManager.add("item3.png","assets/items/item3.png"),s.resourceManager.add("chatballon.png","assets/ui/chatballon.png"),s.resourceManager.add("chatballon_comma.png","assets/ui/chatballon_comma.png"),s.resourceManager.add("ending.png","assets/ending.png"),s.resourceManager.add("inventory.png","assets/inventory.png"),s.resourceManager.add("combine.png","assets/combine.png"),s.resourceManager.add("combine_listitem.png","assets/combine_listitem.png"),s.resourceManager.add("combine_button.png","assets/combine_button.png"),s.resourceManager.add("player1_active.png","assets/player1_active.png"),s.resourceManager.add("player2_active.png","assets/player2_active.png"),s.resourceManager.add("player3_active.png","assets/player3_active.png"),s.resourceManager.add("ch01_skill01_on.png","assets/ch01_skill01_on.png"),s.resourceManager.add("ch01_skill02.png","assets/ch01_skill02.png"),s.resourceManager.add("ch02_skill01_on.png","assets/ch02_skill01_on.png"),s.resourceManager.add("ch02_skill02.png","assets/ch02_skill02.png"),s.resourceManager.add("ch03_skill01_on.png","assets/ch03_skill01_on.png"),s.resourceManager.add("ch03_skill02.png","assets/ch03_skill02.png"),s.resourceManager.add("monster01_active.png","assets/monster01_active.png"),s.resourceManager.add("monster02_active.png","assets/monster02_active.png"),s.resourceManager.add("monster03_active.png","assets/monster03_active.png"),s.resourceManager.add("ending_victory.png","assets/ending_victory.png"),s.resourceManager.load(function(){var e=new n.default(s);s.ui=e,s.start({stagePath:"assets/mapdata/map.json"}),function t(){s.update(),e.update(),requestAnimationFrame(t)}();var t=!0;window.addEventListener("keydown",function(i){66===i.keyCode?(t=!t)?s.enterStage("assets/mapdata/map.json","explore"):s.enterStage("assets/mapdata/map2.json","battle"):67===i.keyCode&&(t?e.showCombine():e.hideCombine(),t=!t)},!0)})}(i)},i.stage.addChild(new e.Sprite(e.Texture.fromFrame("border.png")))})}()}.call(t,i("50uv"))},O4gy:function(e,t,i){e.exports=i.p+"src/assets/miluda/miluda_atk_sw.png"},O5rI:function(e,t,i){e.exports=i.p+"src/assets/miluda/miluda_atk_nw.json"},OSyj:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("BO1k"),s=i.n(n),a=i("Zrlr"),r=i.n(a),o=i("wxAW"),l=i.n(o),h={linear:function(e){return e},outCubic:function(e){return(e-=1)*e*e+1},inCubic:function(e){return e*e*e},inOutCubic:function(e){return(e*=2)<1?e*e*e/2:((e-=2)*e*e+2)/2},inOutSine:function(e){return(1-Math.cos(Math.PI*e))/2},outExponential:function(e){return e<1?1-Math.pow(2,-10*e):1},outBounce:function(e){return e<4/11?121*e*e/16:e<8/11?9.075*e*e-9.9*e+3.4:e<.9?4356/361*e*e-35442/1805*e+16061/1805:10.8*e*e-20.52*e+10.72},outBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1}},u={Loop:1,Stop:2,Destory:3},c=function(){function e(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];r()(this,e),Array.isArray(i)||(i=[i]),this._timelines=i,this._frame=0,this._playing=!1,this._stopHandler=null,this._mode=u.Stop;var a=0,o=!0,l=!1,h=void 0;try{for(var c,p=s()(i);!(o=(c=p.next()).done);o=!0){var d=c.value;a=Math.max(a,d.endFrame)}}catch(e){l=!0,h=e}finally{try{!o&&p.return&&p.return()}finally{if(l)throw h}}this._lastFrame=a}return l()(e,null,[{key:"Timeline",value:function(e,t,i,n){return Array.isArray(n)||(n=[n]),{startFrame:e,endFrame:t,mesh:i,tweens:n}}}]),l()(e,[{key:"playAndStop",value:function(e){this._playing=!0,this._mode=u.Stop,this._stopHandler=e}},{key:"playAndDestroy",value:function(e){this._playing=!0,this._mode=u.Destory,this._stopHandler=e}},{key:"playLoop",value:function(){this._playing=!0,this._mode=u.Loop}},{key:"update",value:function(){if(this._frame++,this._playing){if(this._frame>=this._lastFrame)switch(this._mode){case u.Loop:this._frame=1;break;case u.Destory:return void(this._stopHandler&&this._stopHandler());default:this._playing=!1,this._frame=this._lastFrame,this._stopHandler&&this._stopHandler()}var e=!0,t=!1,i=void 0;try{for(var n,a=s()(this._timelines);!(e=(n=a.next()).done);e=!0){var r=n.value;if(!(this._frame<r.startFrame||r.endFrame<this._frame)){var o=r.endFrame-r.startFrame,l=o>0?(this._frame-r.startFrame)/o:0,c=r.mesh,p=!0,d=!1,g=void 0;try{for(var m,f=s()(r.tweens);!(p=(m=f.next()).done);p=!0){var v=m.value;if("function"==typeof v)v();else{var y=v[0],w=v[1],x=v[2],_=(0,h[v[3]])(l)*(x-w)+w;switch(y){case"scaleX":case"scaleY":case"scale":break;case"x":c.position.x=Math.floor(_);break;case"y":c.position.y=Math.floor(_);break;case"alpha":c.alpha=_;break;case"rotation":image.setRotation(_)}}}}catch(e){d=!0,g=e}finally{try{!p&&f.return&&f.return()}finally{if(d)throw g}}}}}catch(e){t=!0,i=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw i}}}}}]),e}();t.default=c},On9J:function(e,t,i){e.exports=i.p+"src/assets/mapdata/stealBarL.png"},P1we:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var n=i("Zx67"),s=i.n(n),a=i("Zrlr"),r=i.n(a),o=i("wxAW"),l=i.n(o),h=i("zwoO"),u=i.n(h),c=i("Pf15"),p=i.n(c),d=function(t){function i(t,n,a){r()(this,i);var o=u()(this,(i.__proto__||s()(i)).call(this,t,n,a)),l="left"===a.direction?e.Texture.fromFrame("stealBarL.png"):e.Texture.fromFrame("stealBarR.png");return o.base=l,o.bar1=new e.Sprite(new e.Texture(l,new e.Rectangle(0,0,l.width,50))),o.bar2=new e.Sprite(new e.Texture(l,new e.Rectangle(0,50,l.width,40))),o.bar3=new e.Sprite(new e.Texture(l,new e.Rectangle(0,90,l.width,l.height-90))),o.addChild(o.bar1),o.addChild(o.bar2),o.addChild(o.bar3),o.openRatio=1,a.tags&&a.tags.indexOf("key")>=0&&(o.needsKey=!0),o}return p()(i,t),l()(i,[{key:"open",value:function(e){e?e.addTween(this,this.duration,{openRatio:0},.5,"easeInOut",!0):this.openRatio=0}},{key:"close",value:function(e){e?e.addTween(this,this.duration,{openRatio:1},0,"easeInOut",!0):this.openRatio=1}},{key:"touch",value:function(e){if(!this.isOpened)if(this.needsKey){var t=e.player.inventory.getItemByType(3);t?(e.ui.showDialog("문을 열었다!"),this.open(e.tweens),e.player.inventory.deleteItem(t.itemId)):e.ui.showDialog("문을 열기 위해서 열쇠가 필요하다")}else e.ui.showDialog("이 문은 열리지 않을 것 같다\n\n다른 문을 찾아보자")}},{key:"openRatio",set:function(e){this.bar1.position.y=-this.base.height,this.bar2.position.y=this.bar1.position.y+this.bar1.height,this.bar2.height=40*e,this.bar3.position.y=this.bar1.position.y+50+this.bar2.height,this._openRatio=e,this.duration=.5},get:function(){return this._openRatio}},{key:"isOpened",get:function(){return this._openRatio<=0}},{key:"isInteractive",get:function(){return!this.isOpened}}]),i}(i("qRJk").default);t.default=d}.call(t,i("50uv"))},PDkE:function(e,t,i){e.exports=i.p+"src/assets/night/walk_nw.json"},PHls:function(e,t,i){e.exports=i.p+"src/assets/player2_active.png"},PxTa:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("Zrlr"),s=i.n(n),a=i("wxAW"),r=i.n(a),o=function(){function e(t){s()(this,e),this.engine=t,this.activeForMovables=!1,this.activeForTweens=!1,this.processFrame=!0,this.movables=[],this.tweenTargets=[],this.fps=60}return r()(e,[{key:"setObject",value:function(e,t,i){this.object=e,this.speed=8;var n=this.engine.getTilePosXFor(t,i),s=this.engine.getTilePosYFor(t,i);this.speedUnit=getUnit({x:n-e.position.x,y:s-e.position.y}),this.currentTarget={x:n,y:s}}},{key:"getUnit",value:function(e){var t=Math.sqrt(e.x*e.x+e.y*e.y);return{x:e.x/t,y:e.y/t}}},{key:"getDist",value:function(e,t){var i=e.x-t.x,n=e.y-t.y;return Math.sqrt(i*i+n*n)}},{key:"addMovable",value:function(e){this.movables.indexOf(e)>=0||(this.movables[this.movables.length]=e,e.positionR={x:e.position.x,y:e.position.y},this.movables.length>0&&!this.activeForMovables&&(this.activeForMovables=!0))}},{key:"removeMovable",value:function(e){var t=this.movables.indexOf(e);return-1!==t&&(e.positionR=null,e.speedUnit={x:0,y:0},this.movables.splice(t,1)),0===this.movables.length&&(this.activeForMovables=!1),-1!==t}},{key:"setMoveParameters",value:function(e,t,i){var n=this.engine.getTilePosXFor(t,i),s=this.engine.getTilePosYFor(t,i);e.speedUnit=this.getUnit({x:n-e.position.x,y:s-e.position.y}),e.currentTarget={x:n,y:s},e.currentReachThresh=Math.ceil(Math.sqrt(e.speedUnit.x*e.speedUnit.x+e.speedUnit.y*e.speedUnit.y)*e.speedMagnitude)}},{key:"update",value:function(){if(this.processFrame){if(this.activeForMovables)for(var e=this.movables.length,t=0;t<e;t++){var i=this.movables[t];if(i.currentTarget)if(this.getDist(i.positionR,i.currentTarget)<=i.speedMagnitude){i.position.x=i.currentTarget.x,i.position.y=i.currentTarget.y,this.engine.onObjMoveStepEnd(i),t--,e--;continue}i.positionR.x+=i.speedMagnitude*i.speedUnit.x,i.positionR.y+=i.speedMagnitude*i.speedUnit.y,i.position.x=Math.floor(i.positionR.x),i.position.y=Math.floor(i.positionR.y),this.engine.checkForTileChange(i),this.engine.checkForFollowCharacter(i)}if(this.activeForTweens)for(var n=this.tweenTargets.length,s=0;s<n;s++)for(var a=this.tweenTargets[s],r=a.tweens,o=0;o<r.length;o++){var l=r[o];l.currentFrame++;var h=l.vars;for(var u in h)a[u]=l.easingFunc(l.currentFrame,h[u].b,h[u].c,l.totalFrames);l.currentFrame>=l.totalFrames&&(l.onComplete&&l.onComplete(),this.removeTween(a,l)&&(s--,n--),o--)}}}}]),e}();t.default=o},QJA4:function(e,t,i){e.exports=i.p+"src/assets/slash_1.png"},QKlM:function(e,t,i){e.exports=i.p+"src/assets/dialog.png"},QRr6:function(e,t,i){e.exports=i.p+"src/assets/night/walk_sw.png"},QSXp:function(e,t,i){e.exports=i.p+"src/assets/ending.png"},QyYQ:function(e,t,i){e.exports=i.p+"src/assets/mapdata/map2.json"},R2tb:function(e,t,i){e.exports=i.p+"src/assets/btn_centralize.png"},RWdx:function(e,t,i){e.exports=i.p+"src/assets/ch03_skill01.png"},S0Ft:function(e,t,i){e.exports=i.p+"src/assets/inventory.png"},S6X1:function(e,t,i){e.exports=i.p+"src/assets/night/sword_sw.png"},SE36:function(e,t,i){e.exports=i.p+"src/assets/pbar.png"},SJkF:function(e,t,i){e.exports=i.p+"src/assets/combine_listitem.png"},SPZO:function(e,t,i){e.exports=i.p+"src/assets/player3.png"},TCQi:function(e,t,i){e.exports=i.p+"src/assets/player1.png"},ThIZ:function(e,t,i){e.exports=i.p+"src/assets/assets_characters.png"},Thq4:function(e,t,i){e.exports=i.p+"src/assets/ch01_skill02_on.png"},UOdx:function(e,t,i){e.exports=i.p+"src/assets/medusa/monster1-atk_sw.json"},Uaoq:function(e,t,i){e.exports=i.p+"src/assets/mapdata/house-table.png"},"W/RV":function(e,t,i){e.exports=i.p+"src/assets/elid/elid_idle_nw.png"},XvEF:function(e,t,i){e.exports=i.p+"src/assets/mapdata/objects.png"},YuHB:function(e,t,i){e.exports=i.p+"src/assets/mapdata/house-object02.png"},YxTU:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var n=i("Zrlr"),s=i.n(n),a=i("wxAW"),r=i.n(a),o=function(){function t(){s()(this,t),this.cache={},this.loader=this.getNewLoader()}return r()(t,[{key:"getNewLoader",value:function(){var t=new e.loaders.Loader;return t.pre(this.memoryMiddleware.bind(this)),t}},{key:"memoryMiddleware",value:function(e,t){var i=this;this.cache[e.url]?(e.data=this.cache[e.url],e.complete()):e.onComplete.once(function(){i.cache[e.url]=e.data}),t()}},{key:"add",value:function(e,t){t?this.loader.add(e,i("+gN6")("./"+t)):this.loader.add(i("+gN6")("./"+e))}},{key:"load",value:function(e){var t=this.loader;this.loader=this.getNewLoader(),t.load(function(t,i){e(i)})}}]),t}();t.default=o}.call(t,i("50uv"))},ZHXx:function(e,t,i){e.exports=i.p+"src/assets/monster02.png"},aPgd:function(e,t,i){e.exports=i.p+"src/assets/ui/chatballon_comma.png"},bcYj:function(e,t,i){e.exports=i.p+"src/assets/mapdata/objects.json"},bxyk:function(e,t,i){e.exports=i.p+"src/assets/btn_zoomIn.png"},c6m3:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var n=i("BO1k"),s=i.n(n),a=i("Zrlr"),r=i.n(a),o=i("wxAW"),l=i.n(o),h=i("YxTU"),u=i("2Pg/"),c=i("+0Jn"),p=(i("DkLz"),i("1fqz")),d=i("m5GK"),g=i("p4ax"),m=i("yBjY"),f=function(){function t(i){r()(this,t);var n=i.renderer.width,s=i.renderer.height;this.screenWidth=n,this.screenHeight=s,this.background=new e.Container,this.gamelayer=new e.Container,this.foreground=new e.Container,i.stage.addChild(this.background),i.stage.addChild(this.gamelayer),i.stage.addChild(this.foreground),this.gamelayer.mouseup=this.onGameClick.bind(this),this.gamelayer.interactive=!0,this.foreground.mouseup=this.onForegroundClick.bind(this),this.foreground.interactive=!0;var a=new e.Sprite(e.Texture.WHITE);a.width=n+128,a.height=s+128,a.position.x=-64,a.position.y=-64,a.tint=0,i.stage.addChild(a),this.blackScreen=a,this.tweens=new u.default,this.battleMode=new d.default(this),this.exploreMode=new g.default(this),this.currentMode=null,this.nextStageMode=null,this.resourceManager=new h.default;var o=new e.Sprite(e.Texture.WHITE);o.width=n+128,o.height=s+128,o.position.x=-64,o.position.y=-64,o.alpha=0,i.stage.addChild(o),this.whiteScreen=o}return l()(t,[{key:"start",value:function(e){this.resourceManager.add("assets/night/atk_sw.json"),this.resourceManager.add("assets/night/atk_nw.json"),this.resourceManager.add("assets/night/idle_sw.json"),this.resourceManager.add("assets/night/idle_nw.json"),this.resourceManager.add("assets/night/walk_sw.json"),this.resourceManager.add("assets/night/walk_nw.json"),this.resourceManager.add("shadow.png","assets/shadow.png"),this.resourceManager.add("pbar.png","assets/pbar.png"),this.resourceManager.add("pbar_r.png","assets/pbar_r.png"),this.resourceManager.add("pbar_g.png","assets/pbar_g.png"),this.resourceManager.add("pbar_o.png","assets/pbar_o.png"),this.resourceManager.add("assets/elid/elid_atk_nw.json"),this.resourceManager.add("assets/elid/elid_atk_sw.json"),this.resourceManager.add("assets/elid/elid_idle_nw.json"),this.resourceManager.add("assets/elid/elid_idle_sw.json"),this.resourceManager.add("assets/miluda/miluda_atk_sw.json"),this.resourceManager.add("assets/miluda/miluda_atk_nw.json"),this.resourceManager.add("assets/miluda/miluda_idle_sw.json"),this.resourceManager.add("assets/miluda/miluda_idle_nw.json"),this.resourceManager.add("assets/titan/monster2-atk_sw.json"),this.resourceManager.add("assets/titan/monster2-idle_sw.json"),this.resourceManager.add("assets/medusa/monster1-atk_sw.json"),this.resourceManager.add("assets/medusa/monster1_idle_sw.json"),this.resourceManager.add("assets/slash_1.json"),this.enterStage(e.stagePath,"explore")}},{key:"enterStage",value:function(e,t){var i=this;this.nextStageMode=t,this.currentStage?this.tweens.addTween(this.blackScreen,1,{alpha:1},0,"easeIn",!0,function(){i.gamelayer.removeChildren(),i.loadStage(e,i.onStageLoadCompleted.bind(i))}):this.loadStage(e,this.onStageLoadCompleted.bind(this))}},{key:"enterBattle",value:function(){}},{key:"loadStage",value:function(e,t){var i=this;if("battle"===this.nextStageMode)this.exploreMode.stage=this.stage,this.exploreMode.backupX=this.player.gridX,this.exploreMode.backupY=this.player.gridY;else if(this.currentMode===this.battleMode){var n=this.exploreMode.stage;return this.exploreMode.fromBattle=!0,this.exploreMode.stage=void 0,void t(n)}this.resourceManager.add("stage","assets/mapdata/house.json"),this.resourceManager.add("house-tile.png","assets/mapdata/house-tile.png"),this.resourceManager.add("house-table.png","assets/mapdata/house-table.png"),this.resourceManager.add("house-tile01.png","assets/mapdata/house-tile01.png"),this.resourceManager.add("house-tile92.png","assets/mapdata/house-tile92.png"),this.resourceManager.add("house4x4.png","assets/mapdata/house4x4.png"),this.resourceManager.add("house-footpad.png","assets/mapdata/house-footpad.png"),this.resourceManager.add("house-pillar.png","assets/mapdata/house-pillar.png"),this.resourceManager.add("house-object01.png","assets/mapdata/house-object01.png"),this.resourceManager.add("house-object02.png","assets/mapdata/house-object02.png"),this.resourceManager.load(function(e){i.player||(i.player=new p.default);for(var n=e.stage.data,a=new c.default(n.width,n.height,n.tilewidth,n.tileheight),r=new m.default(n),o=0;o<r.height;++o)for(var l=0;l<r.width;++l){var h=r.getTilesAt(l,o),u=!0,d=!1,g=void 0;try{for(var f,v=s()(h);!(u=(f=v.next()).done);u=!0){var y=f.value;a.setTile(l,o,y)}}catch(e){d=!0,g=e}finally{try{!u&&v.return&&v.return()}finally{if(d)throw g}}}a.build(),t&&t(a)})}},{key:"onStageLoadCompleted",value:function(e){var t=this;e.zoomTo(2,!0),this.stage=e,this.gamelayer.addChild(e),"battle"===this.nextStageMode?this.currentMode=this.battleMode:this.currentMode=this.exploreMode,this.nextStageMode=null,this.currentMode.prepare(),this.tweens.addTween(this.blackScreen,1,{alpha:0},0,"easeOut",!0,function(){t.currentMode.start()})}},{key:"onGameClick",value:function(e){this.currentMode&&this.currentMode.onGameClick&&this.currentMode.onGameClick(e)}},{key:"onForegroundClick",value:function(e){this.currentMode&&this.currentMode.onForegroundClick&&this.currentMode.onGameClick(e)}},{key:"update",value:function(){this.tweens.update(),this.stage&&this.stage.update(),this.currentMode&&this.currentMode.update()}}]),t}();t.default=f}.call(t,i("50uv"))},"cf+J":function(e,t,i){e.exports=i.p+"src/assets/background.png"},"co/e":function(e,t,i){e.exports=i.p+"src/assets/night/walk_sw.json"},d9pj:function(e,t,i){e.exports=i.p+"src/assets/combine_button.png"},daie:function(e,t,i){e.exports=i.p+"src/assets/elid/elid_idle_sw.png"},egTb:function(e,t,i){e.exports=i.p+"src/assets/night/idle_sw.json"},f2mI:function(e,t,i){e.exports=i.p+"src/assets/mapdata/house-tile92.png"},h9v0:function(e,t,i){e.exports=i.p+"src/assets/battle-turn_enemy.png"},hMIW:function(e,t,i){e.exports=i.p+"src/assets/elid/elid_atk_sw.json"},hZSW:function(e,t,i){e.exports=i.p+"src/assets/assets_map.json"},i6JU:function(e,t,i){e.exports=i.p+"src/assets/night/walk_nw.png"},iIlD:function(e,t,i){e.exports=i.p+"src/assets/monster03.png"},ilsi:function(e,t,i){e.exports=i.p+"src/assets/mapdata/map.json"},imdM:function(e,t,i){e.exports=i.p+"src/assets/miluda/miluda_idle_nw.png"},ixNQ:function(e,t,i){e.exports=i.p+"src/assets/ch01_skill01.png"},j9Ud:function(e,t,i){e.exports=i.p+"src/assets/mapdata/house-pillar.png"},kQwz:function(e,t,i){e.exports=i.p+"src/assets/medusa/monster1-atk_sw.png"},kpgF:function(e,t,i){e.exports=i.p+"src/assets/battle-turn_player.png"},lIDM:function(e,t,i){e.exports=i.p+"src/assets/ch02_skill01_on.png"},likm:function(e,t,i){e.exports=i.p+"src/assets/mapdata/house-object01.png"},lz6l:function(e,t,i){e.exports=i.p+"src/assets/mapdata/house-tile01.png"},"m4/X":function(e,t,i){e.exports=i.p+"src/assets/player3_active.png"},m5GK:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var n=i("wxAW"),s=i.n(n),a=i("Zx67"),r=i.n(a),o=i("Zrlr"),l=i.n(o),h=i("zwoO"),u=i.n(h),c=i("Pf15"),p=i.n(c),d=i("DkLz"),g=i("zTqn"),m=i("OSyj");function f(t,i){for(var n=[],s=0;s<i;s++)n.push(e.Texture.fromFrame(t+s+".png"));return n}function v(e){return e===d.DIRECTIONS.SE?"se":e===d.DIRECTIONS.NW?"nw":e===d.DIRECTIONS.NE?"ne":e===d.DIRECTIONS.SW?"sw":void 0}var y=function(t){function i(){l()(this,i);var t=u()(this,(i.__proto__||r()(i)).call(this));t.removeChild(t.container),t.name="Hector",t.portrait=new e.Sprite(e.Texture.fromFrame("player1_active.png")),t.skillAIcon=new e.Sprite(e.Texture.fromFrame("ch03_skill01_on.png")),t.skillBIcon=new e.Sprite(e.Texture.fromFrame("ch03_skill02.png")),t.hp=300,t.maxHp=300,t.damage=120,t.balance=.85,t.ciriticalRate=.3,t.ciriticalBalance=1.7,t.defense=.5,t.animations.idle_nw={textures:f("idle_nw",2),flipX:!1},t.animations.idle_sw={textures:f("idle_sw",2),flipX:!1},t.animations.idle_ne={textures:t.animations.idle_nw.textures,flipX:!0},t.animations.idle_se={textures:t.animations.idle_sw.textures,flipX:!0},t.animations.walk_nw={textures:f("walk_nw",8),flipX:!1},t.animations.walk_sw={textures:f("walk_sw",8),flipX:!1},t.animations.walk_ne={textures:t.animations.walk_nw.textures,flipX:!0},t.animations.walk_se={textures:t.animations.walk_sw.textures,flipX:!0},t.animations.attack_nw={textures:f("atk_nw",10),flipX:!1},t.animations.attack_sw={textures:f("atk_sw",10),flipX:!1},t.animations.attack_ne={textures:t.animations.attack_nw.textures,flipX:!0},t.animations.attack_se={textures:t.animations.attack_sw.textures,flipX:!0};var n=new e.extras.AnimatedSprite(t.animations.idle_sw.textures);return n.animationSpeed=.1,n.play(),n.position.y=-48,t.anim=n,t.container.addChild(n),t.hpHolder.position.y=-t.anim.height-8,t.hpHolder.position.x=16-t.hpHolder.width/2,t.hpBar.position.y=-t.anim.height-7,t.hpBar.position.x=16-t.hpHolder.width/2+1,t.addChild(t.container),t}return p()(i,t),i}(g.default),w=function(t){function i(){l()(this,i);var t=u()(this,(i.__proto__||r()(i)).call(this));t.removeChild(t.container),t.name="Elid",t.portrait=new e.Sprite(e.Texture.fromFrame("player2_active.png")),t.skillAIcon=new e.Sprite(e.Texture.fromFrame("ch01_skill01_on.png")),t.skillBIcon=new e.Sprite(e.Texture.fromFrame("ch01_skill02.png")),t.hp=150,t.maxHp=150,t.damage=120,t.balance=.7,t.ciriticalRate=.2,t.ciriticalBalance=1.5,t.defense=.4,t.animations.idle_nw={textures:f("elid_idle_nw",1),flipX:!1},t.animations.idle_sw={textures:f("elid_idle_sw",1),flipX:!1},t.animations.idle_ne={textures:t.animations.idle_nw.textures,flipX:!0},t.animations.idle_se={textures:t.animations.idle_sw.textures,flipX:!0},t.animations.attack_nw={textures:f("elid_atk_nw",7),flipX:!1},t.animations.attack_sw={textures:f("elid_atk_sw",7),flipX:!1},t.animations.attack_ne={textures:t.animations.attack_nw.textures,flipX:!0},t.animations.attack_se={textures:t.animations.attack_sw.textures,flipX:!0};var n=new e.extras.AnimatedSprite(t.animations.idle_sw.textures);return n.animationSpeed=.1,n.play(),n.position.y=-48,t.anim=n,t.container.addChild(n),t.hpHolder.position.y=-t.anim.height-8,t.hpHolder.position.x=16-t.hpHolder.width/2,t.hpBar.position.y=-t.anim.height-7,t.hpBar.position.x=16-t.hpHolder.width/2+1,t.addChild(t.container),t}return p()(i,t),i}(g.default),x=function(t){function i(){l()(this,i);var t=u()(this,(i.__proto__||r()(i)).call(this));t.removeChild(t.container),t.name="Miluda",t.portrait=new e.Sprite(e.Texture.fromFrame("player3_active.png")),t.skillAIcon=new e.Sprite(e.Texture.fromFrame("ch02_skill01_on.png")),t.skillBIcon=new e.Sprite(e.Texture.fromFrame("ch02_skill02.png")),t.hp=100,t.maxHp=100,t.damage=120,t.balance=.8,t.ciriticalRate=.5,t.ciriticalBalance=2,t.defense=.3,t.animations.idle_nw={textures:f("miluda_idle_nw",1),flipX:!1},t.animations.idle_sw={textures:f("miluda_idle_sw",1),flipX:!1},t.animations.idle_ne={textures:t.animations.idle_nw.textures,flipX:!0},t.animations.idle_se={textures:t.animations.idle_sw.textures,flipX:!0},t.animations.attack_nw={textures:f("miluda_atk_nw",8),flipX:!1},t.animations.attack_sw={textures:f("miluda_atk_sw",8),flipX:!1},t.animations.attack_ne={textures:t.animations.attack_nw.textures,flipX:!0},t.animations.attack_se={textures:t.animations.attack_sw.textures,flipX:!0};var n=new e.extras.AnimatedSprite(t.animations.idle_sw.textures);return n.animationSpeed=.1,n.play(),n.position.y=-48,t.anim=n,t.container.addChild(n),t.hpHolder.position.y=-t.anim.height-8,t.hpHolder.position.x=16-t.hpHolder.width/2,t.hpBar.position.y=-t.anim.height-7,t.hpBar.position.x=16-t.hpHolder.width/2+1,t.addChild(t.container),t}return p()(i,t),i}(g.default),_=function(t){function i(){l()(this,i);var t=u()(this,(i.__proto__||r()(i)).call(this));t.removeChild(t.container),t.portrait=new e.Sprite(e.Texture.fromFrame("monster01_active.png")),t.hp=300,t.maxHp=300,t.damage=30,t.balance=.7,t.ciriticalRate=.2,t.ciriticalBalance=1.2,t.defense=.5,t.animations.idle_sw={textures:f("monster2-idle_sw",1),flipX:!1},t.animations.idle_se={textures:t.animations.idle_sw.textures,flipX:!0},t.animations.attack_sw={textures:f("monster2-atk_sw",6),flipX:!1},t.animations.attack_se={textures:t.animations.attack_sw.textures,flipX:!0};var n=new e.extras.AnimatedSprite(t.animations.idle_sw.textures);return n.animationSpeed=.1,n.play(),n.position.x=-9,n.position.y=-55,t.anim=n,t.container.addChild(n),t.hpHolder.position.y=-t.anim.height-8,t.hpHolder.position.x=16-t.hpHolder.width/2,t.hpBar.position.y=-t.anim.height-7,t.hpBar.position.x=16-t.hpHolder.width/2+1,t.addChild(t.container),t}return p()(i,t),s()(i,[{key:"setAnimation",value:function(e){var t=this.animations[e];t&&this.anim.name!==e&&(this.anim.name=e,this.anim.textures=t.textures,this.anim.scale.x=t.flipX?-1:1,this.anim.gotoAndPlay(0))}}]),i}(g.default),k=function(t){function i(){l()(this,i);var t=u()(this,(i.__proto__||r()(i)).call(this));t.removeChild(t.container),t.portrait=new e.Sprite(e.Texture.fromFrame("monster02_active.png")),t.hp=150,t.maxHp=150,t.damage=50,t.balance=.8,t.ciriticalRate=.4,t.ciriticalBalance=1.5,t.defense=.3,t.animations.idle_sw={textures:f("monster1_idle_sw",1),flipX:!1},t.animations.idle_se={textures:t.animations.idle_sw.textures,flipX:!0},t.animations.attack_sw={textures:f("monster1-atk_sw",4),flipX:!1},t.animations.attack_se={textures:t.animations.attack_sw.textures,flipX:!0};var n=new e.extras.AnimatedSprite(t.animations.idle_sw.textures);return n.animationSpeed=.1,n.play(),n.position.y=-48,t.anim=n,t.container.addChild(n),t.hpHolder.position.y=-t.anim.height-8,t.hpHolder.position.x=16-t.hpHolder.width/2,t.hpBar.position.y=-t.anim.height-7,t.hpBar.position.x=16-t.hpHolder.width/2+1,t.addChild(t.container),t}return p()(i,t),i}(g.default),T=function(t){function i(){l()(this,i);var t=u()(this,(i.__proto__||r()(i)).call(this));t.removeChild(t.container),t.portrait=new e.Sprite(e.Texture.fromFrame("monster02_active.png")),t.hp=150,t.maxHp=150,t.damage=50,t.balance=.8,t.ciriticalRate=.4,t.ciriticalBalance=1.5,t.defense=.3,t.animations.idle_sw={textures:f("monster1_idle_sw",1),flipX:!1},t.animations.idle_se={textures:t.animations.idle_sw.textures,flipX:!0},t.animations.attack_sw={textures:f("monster1-atk_sw",4),flipX:!1},t.animations.attack_se={textures:t.animations.attack_sw.textures,flipX:!0};var n=new e.extras.AnimatedSprite(t.animations.idle_sw.textures);return n.animationSpeed=.1,n.play(),n.position.y=-48,t.anim=n,t.container.addChild(n),t.hpHolder.position.y=-t.anim.height-8,t.hpHolder.position.x=16-t.hpHolder.width/2,t.hpBar.position.y=-t.anim.height-7,t.hpBar.position.x=16-t.hpHolder.width/2+1,t.addChild(t.container),t}return p()(i,t),i}(g.default),b=function(){function t(e){l()(this,t),this.game=e,this.callback=null,this.movies=[]}return s()(t,[{key:"prepare",value:function(){var e=this.game.stage;this.players=[],this.enemies=[],this.loadCharacter(),this.cutscene=!0,this.game.ui.showTheaterScreen(0),this.game.ui.battleUi.setBattleUi(this.players,this.enemies),this.game.stage.focusBattleCenter(),e.onTileSelected=null}},{key:"setBattleEndCallback",value:function(e){this.callback=e}},{key:"start",value:function(){this.battleIntro()}},{key:"loadCharacter",value:function(){var e=6,t=7,i=new w;this.players.push(i),this.game.stage.addCharacter(i,e,t-2),i.changeVisualToDirection(d.DIRECTIONS.NE);var n=new x;this.players.push(n),this.game.stage.addCharacter(n,e,t),n.changeVisualToDirection(d.DIRECTIONS.NE);var s=new y;this.players.push(s),this.game.stage.addCharacter(s,e,t+2),s.changeVisualToDirection(d.DIRECTIONS.NE);var a=new k;this.game.stage.addCharacter(a,12,5),this.enemies.push(a);var r=new _;this.game.stage.addCharacter(r,12,7),this.enemies.push(r);var o=new T;this.game.stage.addCharacter(o,12,9),this.enemies.push(o)}},{key:"battleIntro",value:function(){var e=this,t=0;!function i(){0==t?(e.game.stage.focusBattleObject(e.enemies[1]),setTimeout(function(){e.game.ui.showChatBallon(e.enemies[1],"인간 냄새가 나는군..")},550)):1==t?(e.game.stage.focusBattleObject(e.players[2]),setTimeout(function(){e.game.ui.showChatBallon(e.players[2],"각오하라고!!")},550)):2==t&&(e.cutscene=!1,e.game.ui.hideTheaterScreen(1),e.game.stage.focusBattleCenter(),e.game.ui.battleUi.showUi(),e.players.forEach(function(t){t.setUiVisible(e.game,!0)}),e.enemies.forEach(function(t){t.setUiVisible(e.game,!0)})),setTimeout(function(){2===t?(e.turnCount=0,e.nextTurn()):(t++,i())},1200)}()}},{key:"nextTurn",value:function(){var e=this,t=0;this.enemies.forEach(function(e){e.hp>0&&t++});var i=0;if(this.players.forEach(function(e){e.hp>0&&i++}),0===t)this.gameEnd();else if(0===i)this.gameEnd();else if(this.turnCount%4==0)this.game.ui.showStageTitle("Player's Turn"),this.players.forEach(function(e){e.hp>0&&(e.status="idle",e.anim.tint=16777215)}),this.enemies.forEach(function(e){e.anim.tint=12303291}),setTimeout(function(){e.turnCount=1,e.nextTurn()},1e3);else if(this.turnCount%4==1){var n=-1;this.players.forEach(function(e,t){"idle"===e.status&&-1==n&&(n=t)}),-1===n?(this.turnCount=2,this.nextTurn()):this.turn(this.players[n],this.nextTurn.bind(this))}else if(this.turnCount%4==2)this.game.ui.showStageTitle("Enemy's Turn"),this.enemies.forEach(function(e){e.hp>0&&(e.status="idle",e.anim.tint=16777215)}),setTimeout(function(){e.turnCount=3,e.nextTurn()},1e3);else{var s=-1;this.enemies.forEach(function(e,t){"idle"===e.status&&-1==s&&(s=t)}),-1===s?(this.turnCount=0,this.nextTurn()):this.turn(this.enemies[s],this.nextTurn.bind(this))}}},{key:"gameEnd",value:function(){var t=this;this.game.ui.battleUi.hideUi();var i=new e.Sprite(e.Texture.fromFrame("ending_victory.png"));i.alpha=0,this.game.ui.battleUi.addChild(i),this.game.tweens.addTween(i,1,{alpha:1},1,"easeInOut",!0,function(){i.interactive=!0,i.mouseup=function(){t.game.enterStage("assets/mapdata/map.json","explore")}})}},{key:"turn",value:function(e,t){var i=this;this.waitCommand(e,function(e,n){if("attack"===n){var s=void 0;i.players.indexOf(e)>=0?i.enemies.forEach(function(e){e.hp>0&&!s&&(s=e)}):i.players.forEach(function(e){e.hp>0&&!s&&(s=e)}),e.status="done";var a={x:e.position.x,y:e.position.y},r={x:(s.position.x-e.position.x)/10*3+e.position.x,y:(s.position.y-e.position.y)/10*3+e.position.y},o=new m.default(m.default.Timeline(1,1,null,function(){}),m.default.Timeline(1,30,e,[["x",a.x,r.x,"outCubic"],["y",a.y,r.y,"outCubic"]]),m.default.Timeline(31,31,null,function(){e.setAnimation("attack_"+v(e.currentDir)),e.anim.loop=!1}),m.default.Timeline(91,91,null,function(){var t=Math.round(e.damage*e.balance+Math.random()*(1-e.balance)*e.damage*(1-s.defense)),n="#FFFFFF";Math.random()<e.ciriticalRate?(n="#FF0000",t=Math.round(t*e.ciriticalBalance),s.onDamage(i.game,t,{type:"Slash",critical:!0})):s.onDamage(i.game,t,{type:"Slash"}),i.hitEffect(s,t,n)}),m.default.Timeline(111,111,null,function(){e.setAnimation("idle_"+v(e.currentDir)),e.anim.loop=!0}),m.default.Timeline(111,140,e,[["x",r.x,a.x,"outCubic"],["y",r.y,a.y,"outCubic"]]),m.default.Timeline(141,141,null,function(){e.anim.tint=12303291,setTimeout(t,1)}));i.movies.push(o),o.playAndStop()}})}},{key:"waitCommand",value:function(e,t){this.players.indexOf(e)>=0?this.game.ui.battleUi.getCommand(function(e,i){t(e,"attack")}):t(e,"attack")}},{key:"hitEffect",value:function(t,i,n){var s=new e.TextStyle;s.dropShadow=!0,s.dropShadowDistance=3,s.fontStyle="italic",s.fontWeight="bold",s.fontSize=20,s.fill=n||"#ffffff";var a=new e.Text("-"+i,s);a.anchor.x=.5,a.position.y=-24,a.alpha=0,t.addChild(a);var r=new m.default(m.default.Timeline(1,30,a,[["alpha",0,1,"outCubic"]]),m.default.Timeline(1,30,a,[["y",-24,-36,"outCubic"]]),m.default.Timeline(61,91,a,[["alpha",1,0,"outCubic"]]),m.default.Timeline(91,91,null,function(){t.removeChild(a)}));this.movies.push(r),r.playAndStop()}},{key:"update",value:function(){for(var e=this.movies.length,t=0;t<e;t++){var i=this.movies[t];i.update(),i._playing||(this.movies.splice(t,1),t--,e--)}}}]),t}();t.default=b}.call(t,i("50uv"))},"mm+o":function(e,t,i){e.exports=i.p+"src/assets/ui/chatballon.png"},mmyy:function(e,t,i){e.exports=i.p+"src/assets/miluda/miluda_idle_sw.png"},n0x2:function(e,t,i){e.exports=i.p+"src/assets/ch01_skill01_on.png"},nqSm:function(e,t,i){e.exports=i.p+"src/assets/titan/monster2-atk_sw.json"},ob3r:function(e,t,i){e.exports=i.p+"src/assets/mapdata/stealBarR.png"},p4ax:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var n=i("Zrlr"),s=i.n(n),a=i("wxAW"),r=i.n(a),o=i("DkLz"),l=function(){function t(e){s()(this,t),this.game=e}return r()(t,[{key:"prepare",value:function(){if(this.fromBattle){var e=this.game.stage,t=this.game.player;e.addCharacter(t,this.backupX,this.backupY),e.checkForFollowCharacter(t,!0),t.setUiVisible(this.game,!1)}else{var i={x:0,y:0},n=this.game.stage,s=this.game.player;n.addCharacter(s,i.x,i.y),n.checkForFollowCharacter(s,!0),s.setUiVisible(this.game,!1),this.game.player.changeVisualToDirection(o.DIRECTIONS.SE),this.cutscene=!0,this.game.ui.showTheaterScreen(0),this.game.stage.showPathHighlight=!1,this.game.stage.onTouchObject=this.onTouchObject.bind(this),this.game.stage.onTilePassing=this.onTilePassing.bind(this)}}},{key:"start",value:function(){var e=this;this.game.stage.onTileSelected=this.onTileSelected.bind(this),this.fromBattle||(this.game.ui.showStageTitle("어둠의 성탑 99층"),this.game.stage.moveCharacter(this.game.player,4,4),setTimeout(function(){},2e3),setTimeout(function(){e.game.ui.showChatBallon(e.game.player,"큰일이다 문이 닫혔다!\n어떻게 하면 나갈 수 있을까 ...",4),e.cutscene=!1,e.game.ui.hideTheaterScreen(1),e.game.stage.showPathHighlight=!0},3e3))}},{key:"onGameClick",value:function(e){this.cutscene?e.stopped=!0:this.game.stage&&this.game.stage.checkForTileClick(e.data)}},{key:"onTouchObject",value:function(e){e&&e.touch(this.game)}},{key:"onTilePassing",value:function(t){var i=this;if(t===this.game.player&&18===t.gridX&&(15===t.gridY||16===t.gridY))return this.cutscene=!0,this.game.ui.showTheaterScreen(1),this.game.stage.showPathHighlight=!1,this.game.player.changeVisualToDirection(o.DIRECTIONS.SE),setTimeout(function(){i.game.ui.showChatBallon(i.game.player,"이 게임에서 드디어 탈출이다. 집에가자",4)},500),setTimeout(function(){var t=new e.Sprite(e.Texture.fromFrame("ending.png"));i.game.ui.addChild(t),t.alpha=0,i.game.tweens.addTween(t,1,{alpha:1},0,"easeIn",!0)},2e3),!0}},{key:"onForegroundClick",value:function(e){}},{key:"onTileSelected",value:function(e,t){var i=this.game.stage.getObjectAt(e,t);this.target=i,this.game.stage.moveCharacter(this.game.player,e,t)}},{key:"update",value:function(){}}]),t}();t.default=l}.call(t,i("50uv"))},pecr:function(e,t,i){e.exports=i.p+"src/assets/assets_characters.json"},pjYb:function(e,t,i){e.exports=i.p+"src/assets/miluda/miluda_idle_nw.json"},pwQP:function(e,t,i){e.exports=i.p+"src/assets/mapdata/tiles.json"},q1Fi:function(e,t,i){e.exports=i.p+"src/assets/mapdata/house-tile.png"},qOui:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var n=i("BO1k"),s=i.n(n),a=i("Zx67"),r=i.n(a),o=i("Zrlr"),l=i.n(o),h=i("wxAW"),u=i.n(h),c=i("zwoO"),p=i.n(c),d=i("Pf15"),g=i.n(d),m=function(t){function i(t,n,s){l()(this,i);var a=p()(this,(i.__proto__||r()(i)).call(this)),o=new e.mesh.NineSlicePlane(e.Texture.from("dialog.png"),12,10,12,10);o.position.x=(t.screenWidth-n)/2,o.position.y=(t.screenHeight-s)/2,o.width=n,o.height=s,a.plane=o;var h=new e.Sprite(e.Texture.WHITE);return h.alpha=0,h.width=t.screenWidth,h.height=t.screenHeight,h.interactive=!0,h.mouseup=a.onClick.bind(a),a.addChild(h),a.addChild(o),a.onclose=null,a}return g()(i,t),u()(i,[{key:"addTitle",value:function(t){var i=new e.TextStyle({fontFamily:"Arial",fontSize:24,fill:16777215,align:"center"}),n=new e.Text(t,i),s=e.TextMetrics.measureText(t,i),a=this.plane.width-24,r=s.height+16,o=new e.mesh.NineSlicePlane(e.Texture.from("dialogtitle.png"),12,10,12,10);o.position.x=(this.plane.width-a)/2,o.position.y=12,o.width=a,o.height=r,n.anchor.x=.5,n.anchor.y=.5,n.position.x=a/2,n.position.y=r/2,o.addChild(n),this.plane.addChild(o)}},{key:"onClick",value:function(e){e.stopped=!0,this.visible=!1,this.onclose&&this.onclose()}}]),i}(e.Container),f=function(t){function i(t,n){l()(this,i);var s=p()(this,(i.__proto__||r()(i)).call(this));s.follower=t;var a=new e.TextStyle({fontFamily:"Arial",fontSize:12,fill:0,align:"center",wordWrap:!0,wordWrapWidth:180}),o=e.TextMetrics.measureText(n,a),h=new e.mesh.NineSlicePlane(e.Texture.from("chatballon.png"),12,10,12,10);h.width=o.width+36,h.height=o.height+36,s.plane=h;var u=new e.Sprite(e.Texture.from("chatballon_comma.png"));u.position.y=h.height-5,s.comma=u;var c=new e.Text(n,a);return c.anchor.x=.5,c.anchor.y=.5,c.position.x=h.width/2,c.position.y=h.height/2,s.addChild(h),h.addChild(u),h.addChild(c),s.updatePosition(),s}return g()(i,t),u()(i,[{key:"updatePosition",value:function(){var t=this.follower,i=this.plane,n=this.comma,s=t.toGlobal(new e.Point(0,0));i.position.x=Math.max(s.x-i.width/2,0),i.position.y=Math.max(s.y-t.height-i.height-36,0),n.position.x=i.width/2}}]),i}(e.Container),v=function(t){function i(t,n,s){l()(this,i);var a=p()(this,(i.__proto__||r()(i)).call(this)),o=new e.mesh.NineSlicePlane(e.Texture.from("dialog.png"),12,10,12,10);o.position.x=(t.screenWidth-n)/2,o.position.y=t.screenHeight-s-12,o.width=n,o.height=s,a.plane=o;var h=new e.Sprite(e.Texture.WHITE);return h.alpha=0,h.width=t.screenWidth,h.height=t.screenHeight,h.interactive=!0,h.mouseup=a.onClick.bind(a),a.innerWidth=n-32,a.addChild(h),a.addChild(o),a.onclose=null,a}return g()(i,t),u()(i,[{key:"onClick",value:function(e){e.stopped=!0,this.visible=!1,this.onclose&&this.onclose()}},{key:"setText",value:function(t){this.text&&this.plane.removeChild(this.text);var i=new e.Text(t,{fontFamily:"Arial",fontSize:24,fill:16777215,align:"center",wordWrap:!0,wordWrapWidth:this.innerWidth});i.anchor.x=.5,i.anchor.y=.5,i.position.x=this.plane.width/2,i.position.y=this.plane.height/2,this.text=i,this.plane.addChild(i)}}]),i}(e.Container),y=function(t){function i(t,n){l()(this,i);var s=p()(this,(i.__proto__||r()(i)).call(this)),a=new e.TextStyle({fontFamily:"Arial",fontSize:48,fill:16777215,align:"center",dropShadow:!0}),o=new e.Text(n,a);o.anchor.x=.5,o.anchor.y=.5,o.position.x=t.screenWidth/2,o.position.y=.25*t.screenHeight,s.addChild(o);var h=e.TextMetrics.measureText(n,a),u=new e.Sprite(e.Texture.WHITE);return u.width=h.width+8,u.height=4,u.anchor.x=.5,u.anchor.y=.5,u.position.y=h.height/2+4,o.addChild(u),s.title=o,s}return g()(i,t),u()(i,[{key:"titleScale",set:function(e){this.title.scale.x=e},get:function(){return this.title.scale.x}}]),i}(e.Container),w=function(t){function i(t){l()(this,i);var n=p()(this,(i.__proto__||r()(i)).call(this)),s=new e.Sprite(e.Texture.fromFrame("inventory.png"));return s.anchor.x=.5,s.anchor.y=.5,s.position.x=t.screenWidth/2,s.position.y=t.screenHeight/2,n.addChild(s),n.base=s,n}return g()(i,t),u()(i,[{key:"update",value:function(t){var i=this;this.base.removeChildren();var n=0;t.eachItem(function(t){var s=n%4,a=Math.floor(n/4),r=new e.Sprite(e.Texture.fromFrame("item3.png"));r.position.x=85*s+17-i.base.width/2,r.position.y=85*a+60-i.base.height/2,i.base.addChild(r),++n})}}]),i}(e.Container),x=function(t){function i(t){l()(this,i);var n=p()(this,(i.__proto__||r()(i)).call(this)),s=new e.Sprite(e.Texture.WHITE);s.alpha=0,s.width=t.screenWidth,s.height=t.screenHeight,s.interactive=!0,s.mouseup=function(e){e.stopped=!0,n.visible=!1},n.addChild(s);var a=new e.Sprite(e.Texture.fromFrame("combine.png"));a.anchor.x=.5,a.anchor.y=.5,a.position.x=t.screenWidth/2,a.position.y=t.screenHeight/2,a.interactive=!0,a.mouseup=function(e){e.stopped=!0},n.addChild(a);var o=new e.Sprite(e.Texture.fromFrame("combine_button.png"));return o.tint=4210752,o.position.x=-105,o.position.y=115,o.mouseup=function(e){e.stopped=!0;var i=t.game.player.inventory.getItemByType(1),s=t.game.player.inventory.getItemByType(2);i&&s&&(t.game.player.inventory.deleteItem(i.itemId),t.game.player.inventory.deleteItem(s.itemId),t.game.player.inventory.addItem(100,3),n.visible=!1,t.showItemAcquire(3,function(){t.showDialog("잠긴 문을 열 수 있게 되었다")}))},a.addChild(o),n.base=a,n.button=o,n}return g()(i,t),u()(i,[{key:"update",value:function(e){this.showRecipe(e)}},{key:"showRecipe",value:function(t){var i=this,n=!1;this.base.removeChildren(),this.base.addChild(this.button);var s=new e.Sprite(e.Texture.fromFrame("combine_listitem.png"));s.position.x=80,s.position.y=-108;var a=new e.TextStyle({fontFamily:"Arial",fontSize:16,fill:16777215,align:"center"}),r=new e.Text("출구 열쇠",a);s.addChild(r),r.position.x=15,r.position.y=(s.height-r.height)/2,this.base.addChild(s),s.interactive=!0,s.mouseup=function(s){if(s.stopped=!0,!n){var a=t.player.inventory.getItemByType(1),r=t.player.inventory.getItemByType(2),o=a?16777215:8421504,l=r?16777215:8421504,h=new e.TextStyle({fontFamily:"Arial",fontSize:16,fill:o,align:"center"}),u=new e.Text("열쇠 조각 A",h);u.position.x=-280,u.position.y=-96;var c=new e.TextStyle({fontFamily:"Arial",fontSize:16,fill:l,align:"center"}),p=new e.Text("열쇠 조각 B",c);p.position.x=-280,p.position.y=-23;var d=new e.TextStyle({fontFamily:"Arial",fontSize:16,fill:4259648,align:"center"}),g=new e.Text("출구 열쇠",d);g.position.x=-280,g.position.y=72,i.base.addChild(u),i.base.addChild(p),i.base.addChild(g),a&&r?(i.button.tint=16777215,i.button.interactive=!0):(i.button.tint=4210752,i.button.interactive=!1),n=!0}}}}]),i}(e.Container),_=function(t){function i(t){l()(this,i);var n=p()(this,(i.__proto__||r()(i)).call(this));return n.battleUi={playersPortraits:[],enemiesPortraits:[]},n.players=[],n.enemies=[],n.ui=t,n.playerUi=new e.Container,n.enemyUi=new e.Container,n.playerUi.visible=!1,n.enemyUi.visible=!1,n.addChild(n.playerUi),n.addChild(n.enemyUi),n}return g()(i,t),u()(i,[{key:"setBattleUi",value:function(t,i){this.battleUi={playersPortraits:[],enemiesPortraits:[]},this.removeChild(this.playerUi),this.removeChild(this.enemyUi),this.playerUi=new e.Container,this.enemyUi=new e.Container,this.makePlayerUi(t),this.makeEnemiesUi(i),this.playerUi.visible=!1,this.enemyUi.visible=!1,this.addChild(this.playerUi),this.addChild(this.enemyUi)}},{key:"makePlayerUi",value:function(t){var i=this;this.players=t,t.forEach(function(t,n){var s={portrait:t.portrait,skillA:t.skillAIcon,skillB:t.skillBIcon};s.portrait.x=25+94*n,s.portrait.y=i.ui.screenHeight-57-s.portrait.height,s.portrait.interactive=!0,i.playerUi.addChild(s.portrait),s.skillA.x=s.portrait.x+s.portrait.width/2-s.skillA.width-3,s.skillA.y=s.portrait.y+s.portrait.height,s.skillA.interactive=!0,i.playerUi.addChild(s.skillA),s.skillB.x=s.portrait.x+s.portrait.width/2+3,s.skillB.y=s.portrait.y+s.portrait.height,s.skillB.interactive=!0,i.playerUi.addChild(s.skillB);var a=new e.TextStyle;a.dropShadow=!0,a.dropShadowDistance=1,a.fontSize=15,a.fill="#ffffff";var r=new e.Text(t.name,a);r.position.x=Math.round(s.portrait.x+s.portrait.width/2-r.width/2),r.position.y=s.portrait.y-r.height,i.playerUi.addChild(r),i.battleUi.playersPortraits.push(s)})}},{key:"makeEnemiesUi",value:function(t){var i=this;this.enemies=t,t.forEach(function(n,s){var a={portrait:n.portrait};a.portrait.x=970-94*(t.length-s),a.portrait.y=10,a.portrait.interactive=!0,i.enemyUi.addChild(a.portrait);var r=new e.TextStyle;r.dropShadow=!0,r.dropShadowDistance=1,r.fontSize=15,r.fill="#ffffff";var o=new e.Text("Lv.1",r);o.position.x=Math.round(a.portrait.x+a.portrait.width/2-o.width/2),o.position.y=a.portrait.y+a.portrait.height+3,i.enemyUi.addChild(o),i.battleUi.enemiesPortraits.push(a)})}},{key:"showUi",value:function(){this.playerUi.visible=!0,this.enemyUi.visible=!0}},{key:"hideUi",value:function(){this.playerUi.visible=!1,this.enemyUi.visible=!1}},{key:"updateStatus",value:function(e){if(e.hp<=0){var t=this.players.indexOf(e),i=this.enemies.indexOf(e);t>=0?this.battleUi.playersPortraits[t].portrait.tint=16733525:this.battleUi.enemiesPortraits[i].portrait.tint=16733525}}},{key:"disableInteractive",value:function(){var e=this;this.players.forEach(function(t,i){e.battleUi.playersPortraits[i].skillA.interactive=!1,e.battleUi.playersPortraits[i].skillB.interactive=!1,e.battleUi.playersPortraits[i].skillA.removeAllListeners(),e.battleUi.playersPortraits[i].skillB.removeAllListeners()})}},{key:"getCommand",value:function(e){var t=this;this.players.forEach(function(i,n){i.hp>0&&(t.battleUi.playersPortraits[n].portrait.tint=12303291),"idle"===i.status&&(t.battleUi.playersPortraits[n].portrait.tint=16777215,t.battleUi.playersPortraits[n].skillA.interactive=!0,t.battleUi.playersPortraits[n].skillB.interactive=!0,t.battleUi.playersPortraits[n].skillA.on("mouseup",function(s){t.battleUi.playersPortraits[n].portrait.tint=12303291,e(i,"selectA"),t.disableInteractive()}),t.battleUi.playersPortraits[n].skillB.on("mouseup",function(s){t.battleUi.playersPortraits[n].portrait.tint=12303291,e(i,"selectB"),t.disableInteractive()}))})}}]),i}(e.Container),k=function(t){function i(t){l()(this,i);var n=p()(this,(i.__proto__||r()(i)).call(this));return n.game=t,n.game.foreground.addChild(n),n.screenWidth=t.screenWidth,n.screenHeight=t.screenHeight,n.dialog=new v(n,700,150),n.dialog.visible=!1,n.addChild(n.dialog),n.theater=new e.Sprite(e.Texture.fromFrame("theater.png")),n.theater.visible=!1,n.addChild(n.theater),n.chatBallons=[],n.inventory=new w(n),n.addChild(n.inventory),n.inventory.visible=!1,n.combine=new x(n),n.addChild(n.combine),n.combine.visible=!1,n.battleUi=new _(n),n.addChild(n.battleUi),n}return g()(i,t),u()(i,[{key:"showDialog",value:function(e,t){this.dialog.setText(e),this.dialog.visible=!0,this.dialog.onclose=t}},{key:"hideDialog",value:function(){this.dialog.visible=!1}},{key:"showStageTitle",value:function(e,t){var i=this,n=new y(this,e);n.titleScale=0,n.alpha=0,this.addChild(n),this.game.tweens.addTween(n,1,{titleScale:1,alpha:1},0|t,"easeInOut",!0,function(){i.game.tweens.addTween(n,1,{alpha:0},1,"easeInOut",!1,function(){i.removeChild(n)})})}},{key:"showStatUI",value:function(){}},{key:"showTheaterScreen",value:function(e){var t=this.theater;t.visible=!0,e>0?(t.alpha=0,this.game.tweens.addTween(t,e,{alpha:1},0,"easeInOut",!0)):t.alpha=1}},{key:"hideTheaterScreen",value:function(e){var t=this.theater;t.visible=!0,e>0?this.game.tweens.addTween(t,e,{alpha:0},0,"easeInOut",!0,function(){t.visible=!1}):(t.alpha=0,t.visible=!1)}},{key:"showItemAcquire",value:function(t,i){var n=this,s=new m(this,400,300);s.addTitle("아이템 획득"),s.onclose=function(){n.removeChild(s),i&&i()},this.addChild(s);var a=new e.Sprite(e.Texture.fromFrame("item3.png"));a.anchor.x=.5,a.anchor.y=.5,a.position.x=s.width/2,a.position.y=s.height/2-20,s.addChild(a);var r=void 0;1===t?r="[열쇠조각A]를 얻었다":2===t?r="[열쇠조각B]를 얻었다":3===t&&(r="[철문열쇠]를 얻었다");var o=new e.Text(r,{fontFamily:"Arial",fontSize:16,fill:16777215,align:"center",wordWrap:!0,wordWrapWidth:s.width/2});o.anchor.x=.5,o.anchor.y=.5,o.position.x=s.width/2,o.position.y=a.position.y+a.height/2+32,s.addChild(o)}},{key:"showChatBallon",value:function(e,t,i){var n=this,s=new f(e,t);this.addChild(s),this.chatBallons.push(s),i=i||3,setTimeout(function(){n.removeChild(s);var e=n.chatBallons.indexOf(s);e>=0&&n.chatBallons.splice(e,1)},1e3*i)}},{key:"update",value:function(){var e=!0,t=!1,i=void 0;try{for(var n,a=s()(this.chatBallons);!(e=(n=a.next()).done);e=!0){n.value.updatePosition()}}catch(e){t=!0,i=e}finally{try{!e&&a.return&&a.return()}finally{if(t)throw i}}}},{key:"showInventory",value:function(){this.inventory.visible=!0,this.inventory.update(this.game.player.inventory)}},{key:"hideInventory",value:function(){this.inventory.visible=!1}},{key:"showCombine",value:function(){this.combine.visible=!0,this.combine.update(this.game)}},{key:"hideCombine",value:function(){this.combine.visible=!1}}]),i}(e.Container);t.default=k}.call(t,i("50uv"))},qRJk:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var n=i("Zx67"),s=i.n(n),a=i("Zrlr"),r=i.n(a),o=i("wxAW"),l=i.n(o),h=i("zwoO"),u=i.n(h),c=i("Pf15"),p=i.n(c),d=32,g=16,m=function(t){function i(t,n,a){r()(this,i);var o=u()(this,(i.__proto__||s()(i)).call(this));if(o.gridX=t,o.gridY=n,a.texture){var l=a.texture,h=new e.Sprite(l);h.position.y=-l.height,o.addChild(h),o.tileTexture=h,a.imageOffset&&(o.tileTexture.position.x+=a.imageOffset.x,o.tileTexture.position.y+=a.imageOffset.y),a.flipX&&(h.anchor.x=1,h.scale.x=-1)}var c=[[0,-g/2],[d/2,-g],[d,-g/2],[d/2,0]];o.vertices=c,o.highlightedOverlay=new e.Graphics,o.highlightedOverlay.clear(),o.highlightedOverlay.lineStyle(2,16777215,1),o.highlightedOverlay.beginFill(8443903,.5),o.highlightedOverlay.moveTo(c[0][0],c[0][1]);for(var p=1;p<c.length;p++)o.highlightedOverlay.lineTo(c[p][0],c[p][1]);return o.highlightedOverlay.lineTo(c[0][0],c[0][1]),o.highlightedOverlay.endFill(),o.addChild(o.highlightedOverlay),o.highlightedOverlay.visible=!1,o.isHighlighted=!1,o.movable=a.movable||!1,o.transperancy=a.transperancy,o.isGroundTile="groundtile"===a.type,o}return p()(i,t),l()(i,[{key:"setTexture",value:function(e){this.tileTexture.texture=e,this.tileTexture.position.y=-e.height}},{key:"setObject",value:function(e){this.addChild(e)}},{key:"removeObject",value:function(e){this.removeChild(e)}},{key:"setHighlighted",value:function(e){this.isHighlighted!==e&&(this.highlightedOverlay.visible=e,this.isHighlighted=e)}}]),i}(e.Container);t.default=m}.call(t,i("50uv"))},"qTO+":function(e,t,i){e.exports=i.p+"src/assets/theater.png"},r15H:function(e,t,i){e.exports=i.p+"src/assets/items/item3.png"},rki7:function(e,t,i){e.exports=i.p+"src/assets/elid/elid_idle_sw.json"},sARW:function(e,t,i){e.exports=i.p+"src/assets/torch_light.png"},sskf:function(e,t,i){e.exports=i.p+"src/assets/player3_active2.png"},tSQQ:function(e,t,i){e.exports=i.p+"src/assets/opening.png"},uCLC:function(e,t,i){e.exports=i.p+"src/assets/titan/monster2-atk_sw.png"},uGjp:function(e,t,i){e.exports=i.p+"src/assets/player2_active2.png"},ufHM:function(e,t,i){e.exports=i.p+"src/assets/player1_active2.png"},v5Cq:function(e,t,i){e.exports=i.p+"src/assets/elid/elid_death_nw.png"},v8ZX:function(e,t,i){e.exports=i.p+"src/assets/night/sword_nw.json"},"vDF+":function(e,t,i){e.exports=i.p+"src/assets/ch03_skill01_on.png"},vIzp:function(e,t,i){e.exports=i.p+"src/assets/night/sword_nw.png"},vW6P:function(e,t,i){e.exports=i.p+"src/assets/medusa/monster1_idle_sw.json"},vbJk:function(e,t,i){e.exports=i.p+"src/assets/elid/elid_atk_nw.json"},wCSF:function(e,t,i){e.exports=i.p+"src/assets/ch02_skill01.png"},x0Wi:function(e,t,i){e.exports=i.p+"src/assets/windowlight.png"},x62O:function(e,t,i){e.exports=i.p+"src/assets/mapdata/house-carpet01.png"},xGYh:function(e,t,i){e.exports=i.p+"src/assets/mapdata/tiles.png"},xnvo:function(e,t,i){e.exports=i.p+"src/assets/ch03_skill02_on.png"},xykr:function(e,t,i){e.exports=i.p+"src/assets/night/atk_sw.json"},y7rX:function(e,t,i){e.exports=i.p+"src/assets/medusa/monster1_idle_sw.png"},yBjY:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var n=i("woOf"),s=i.n(n),a=i("BO1k"),r=i.n(a),o=i("Zrlr"),l=i.n(o),h=i("wxAW"),u=i.n(h),c=function(){function t(e){l()(this,t),this.create(e)}return u()(t,[{key:"create",value:function(t){this.width=t.height,this.height=t.width;var i={},n=!0,a=!1,o=void 0;try{for(var l,h=r()(t.tilesets);!(n=(l=h.next()).done);n=!0){var u=l.value,c=u.margin,p=u.tilewidth,d=u.tileheight,g=u.spacing,m=u.firstgid;if(u.image){var f=e.Texture.fromFrame(u.image);f.scaleMode=e.SCALE_MODES.NEAREST;for(var v=0;v<u.tilecount;++v){var y={};y.id=v+m;var w=c+(p+g)*(v%u.columns),x=c+(d+g)*Math.floor(v/u.columns);y.texture=new e.Texture(f,new e.Rectangle(w,x,p,d)),i[y.id]=y}}var _=!0,k=!1,T=void 0;try{for(var b,C=r()(u.tiles||[]);!(_=(b=C.next()).done);_=!0){var j=b.value,S=j.id+m,F=i[S]=i[S]||{id:S};F.type=j.type,j.image&&(F.texture=e.Texture.fromFrame(j.image)),F.animations=j.animation||[];var M=!0,O=!1,I=void 0;try{for(var P,H=r()(F.animations);!(M=(P=H.next()).done);M=!0){var A=P.value;A.texture=i[A.tileid+m].texture}}catch(e){O=!0,I=e}finally{try{!M&&H.return&&H.return()}finally{if(O)throw I}}var E=!0,B=!1,U=void 0;try{for(var W,X=r()(j.properties||[]);!(E=(W=X.next()).done);E=!0){var D=W.value;F[D.name]=D.value}}catch(e){B=!0,U=e}finally{try{!E&&X.return&&X.return()}finally{if(B)throw U}}}}catch(e){k=!0,T=e}finally{try{!_&&C.return&&C.return()}finally{if(k)throw T}}}}catch(e){a=!0,o=e}finally{try{!n&&h.return&&h.return()}finally{if(a)throw o}}var L=new Array(this.width*this.height),R=!0,z=!1,N=void 0;try{for(var Z,q=r()(t.layers);!(R=(Z=q.next()).done);R=!0){var Y=Z.value;if(t.width!==Y.width||t.height!==Y.height)throw new Error("map 과 layer 의 크기는 항상 일치하여야 합니다");for(var J=0;J<this.height;++J)for(var Q=0;Q<this.width;++Q){var G=Q+J*this.width,V=J+(Y.width-Q-1)*Y.width,K=Y.data[V];if(0!==K){var $=!!(2147483648&K);K&=268435455;var ee={};s()(ee,i[K]),ee.flipX=$,ee.xsize=ee.xsize||1,ee.ysize=ee.ysize||1;var te=ee.flipX?ee.xsize:ee.ysize;te>1&&(ee.imageOffset={x:-(te-1)*t.tilewidth/2,y:0});for(var ie=0;ie<ee.ysize;++ie)for(var ne=0;ne<ee.xsize;++ne)if(0!==ne||0!==ie){var se=$?Q+ie+(J-ne)*this.width:Q+ne+(J-ie)*this.width;L[se]=L[se]||[];var ae={};s()(ae,ee),ae.texture=null,L[se].push(ae)}L[G]=L[G]||[],L[G].push(ee)}}}}catch(e){z=!0,N=e}finally{try{!R&&q.return&&q.return()}finally{if(z)throw N}}this.tileset=i,this.tiledata=L}},{key:"getTilesAt",value:function(e,t){var i=e+t*this.width;return this.tiledata[i]||[]}}]),t}();t.default=c}.call(t,i("50uv"))},yDv2:function(e,t,i){e.exports=i.p+"src/assets/dialogtitle.png"},z8NX:function(e,t,i){e.exports=i.p+"src/assets/shadow.png"},zPL7:function(e,t,i){e.exports=i.p+"src/assets/night/idle_nw.json"},zTqn:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var n=i("Zx67"),s=i.n(n),a=i("Zrlr"),r=i.n(a),o=i("wxAW"),l=i.n(o),h=i("zwoO"),u=i.n(h),c=i("Pf15"),p=i.n(c),d=i("DkLz");function g(e){return e===d.DIRECTIONS.SE?"se":e===d.DIRECTIONS.NW?"nw":e===d.DIRECTIONS.NE?"ne":e===d.DIRECTIONS.SW?"sw":void 0}var m=function(t){function i(){r()(this,i);var t=u()(this,(i.__proto__||s()(i)).call(this));t.gridX=0,t.gridY=0,t.status="idle",t.container=new e.Container,t.animations={};var n=new e.Sprite(e.Texture.fromFrame("shadow.png"));n.position.y=-n.height,t.container.addChild(n);var a=new e.Sprite(e.Texture.fromFrame("pbar.png")),o=new e.Sprite(e.Texture.fromFrame("pbar_r.png"));return t.hpHolder=a,t.hpBar=o,t.hpHolder.alpha=0,t.hpBar.alpha=0,t.container.addChild(a),t.container.addChild(o),t.currentDir=d.DIRECTIONS.SW,t.addChild(t.container),t}return p()(i,t),l()(i,[{key:"setUiVisible",value:function(e,t){var i=this.hp/this.maxHp*34;this.hpBar.width=i,t?(e.tweens.addTween(this.hpHolder,.5,{alpha:1},0,"easeInOut",!0),e.tweens.addTween(this.hpBar,.5,{alpha:1},0,"easeInOut",!0)):(e.tweens.addTween(this.hpHolder,.5,{alpha:0},0,"linear",!0),e.tweens.addTween(this.hpBar,.5,{alpha:0},0,"linear",!0))}},{key:"onDamage",value:function(t,i,n){var s=this;this.hp-=i;var a=(this.hp<0?0:this.hp)/this.maxHp*34;n.critical&&(t.whiteScreen.alpha=.2,t.tweens.addTween(t.whiteScreen,.1,{alpha:0},0,"easeInOut",!0),t.stage.vibrateObj(t.stage.mapContainer,6,null));var r={textures:function(t,i){for(var n=[],s=0;s<i;s++)n.push(e.Texture.fromFrame(t+s+".png"));return n}("slash_",8),flipX:!1},o=new e.extras.AnimatedSprite(r.textures);o.animationSpeed=.5,o.loop=!1,o.blendMode=e.BLEND_MODES.ADD,o.play(),o.position.y=-o.height,o.position.x=-o.width/4,this.container.addChild(o),t.ui.battleUi.updateStatus(this),t.tweens.addTween(this.hpBar,.5,{width:a},0,"easeInOut",!0),t.stage.vibrateObj(this.anim,4,function(){s.checkDie()})}},{key:"checkDie",value:function(){var e=this;this.hp<=0&&(this.status="die",function t(){setTimeout(function(){e.container.alpha>=.1?(e.container.alpha-=.1,t()):e.container.alpha=0},20)}())}},{key:"setAnimation",value:function(e){var t=this.animations[e];t&&this.anim.name!==e&&(this.anim.name=e,this.anim.textures=t.textures,this.anim.scale.x=t.flipX?-1:1,this.anim.position.x=t.flipX?this.anim.width:0,this.anim.gotoAndPlay(0))}},{key:"changeVisualToDirection",value:function(e){this.currentDir=e,this.isMoving?this.setAnimation("walk_"+g(e)):this.setAnimation("idle_"+g(e))}}]),i}(e.Container);t.default=m}.call(t,i("50uv"))}},["NHnr"]);
//# sourceMappingURL=app.9f93cfd65098a069896a.js.map